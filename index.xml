<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Torodd F. Ottestad</title>
<link>https://lektorodd.github.io/</link>
<atom:link href="https://lektorodd.github.io/index.xml" rel="self" type="application/rss+xml"/>
<description>Blogg med digitale tips og triks i skulen</description>
<generator>quarto-1.4.549</generator>
<lastBuildDate>Thu, 18 Jan 2024 23:00:00 GMT</lastBuildDate>
<item>
  <title>Perplexity.ai</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/240112_perplexity/</link>
  <description><![CDATA[ 





<p>Dei siste månadane har eg prøvd ut det nye søkeverktøyet <a href="https://www.perplexity.ai/">Perplexity</a>. Verktøyet baserer seg på <em>samtalebaserte søk</em> etter informasjon og kunnskap, og nyttar kunstig intelligens i prosessen.</p>
<blockquote class="blockquote">
<p>Perplexity was founded on the belief that searching for information should be a straightforward, efficient experience, free from the influence of advertising-driven models<sup>1</sup></p>
</blockquote>
<p>I den siste tida har firmaet hatt god vind i segla, etter at dei i sin andre innsamlingsrunde <a href="https://blog.perplexity.ai/blog/perplexity-raises-series-b-funding-round">samla inn nesten 800 millionar kroner</a>. Her fekk dei mellom anna støtte av Jeff Bezos (mannen bak <em>Amazon</em>) og teknologi-giganten <em>NVIDIA</em>.</p>
<section id="søke-med-kunstig-intelligens" class="level2">
<h2 class="anchored" data-anchor-id="søke-med-kunstig-intelligens">Søke med kunstig intelligens?</h2>
<p>Perplaxity nyttar kunstig intelligens på ulike måtar. Det vert nytta store språkmodellar (LLM) til å forstå spørsmålet og lage søkeord og setningar. Vidare skriv verktøyet eit svar eller ei oppsummering ut frå resultata til søket. I svaret vert det referert til kjelder og det ligg ved ei liste over alle resultata som er nytta i søket. Eit døme på eit resultat <a href="https://www.perplexity.ai/search/Perplexityai-PDbmrD8HR6evAzagNHwFDg?s=c">ser slik ut</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/240112_perplexity/startskjerm.png" class="img-fluid figure-img"></p>
<figcaption>Startskjermen</figcaption>
</figure>
</div>
</section>
<section id="fordelar" class="level2">
<h2 class="anchored" data-anchor-id="fordelar">Fordelar</h2>
<p>Det er fleire fordelar med eit slikt verktøy. Her er nokre av dei.</p>
<section id="kjelder-og-organisering" class="level3">
<h3 class="anchored" data-anchor-id="kjelder-og-organisering">Kjelder og organisering</h3>
<p>Kjelder vert oppgitt som ein del av svaret, i motsetnad til om ein spør store språkmodellar om faktaspørsmål som ligg i deira «generelle kunnskap». I tillegg er det lett å organisera resultat frå ulike søk i samlingar (<em>Collections</em>) og dela søkeresultata med andre. Det er òg mogleik for «samsøking» eller invitera andre bidragsytarar til å jobba i samme samling. Har du ein profil er det i tillegg enkelt å spørja vidare frå ein eksisterande tråd.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/240112_perplexity/samlingar.png" class="img-fluid figure-img"></p>
<figcaption>Døme på samlingar</figcaption>
</figure>
</div>
</section>
<section id="annonsefritt" class="level3">
<h3 class="anchored" data-anchor-id="annonsefritt">Annonsefritt</h3>
<p>Eit anna pluss er at Perplexity ikkje er reklamebasert som t.d. Google. Det gjer at det ikkje på same måte er annonser og brukardata som avgjer kva resultat som kjem øvst i resultatlista når ein søker. I tillegg finns det ein gratisversjon av Perplexity som har mange av dei same funksjonane som betalingsversjonen.</p>
</section>
<section id="ai-profil" class="level3">
<h3 class="anchored" data-anchor-id="ai-profil">AI-profil</h3>
<p>Sist men ikkje minst kan du laga deg ein <code>AI-profil</code>. Dette er informasjon du kan gje Perplexity som kan påverka både søkinga. Du kan gje instruksjonar om interessefelt, alder, svarspråk, søkespråk og andre preferansar. Profilen kan vera «global», altså påverka alle søk, eller så kan det lagast eigne profilar for kvar samling. Denne profilen kan ein laga så avansert og spesifikk som ein vil, det er berre tida og interessen som set grenser 🤓</p>
</section>
<section id="fokus" class="level3">
<h3 class="anchored" data-anchor-id="fokus">Fokus</h3>
<p>For å spissa søket er det òg mogleikar for å velga eit <em>fokus</em> i søket. Her er det mogleg å spissa søket inn mot t.d. YouTube-videoar eller akademiske kjelder.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/240112_perplexity/fokus.png" class="img-fluid figure-img"></p>
<figcaption>Ulike fokus</figcaption>
</figure>
</div>
</section>
</section>
<section id="ulemper" class="level2">
<h2 class="anchored" data-anchor-id="ulemper">Ulemper</h2>
<p>Sjølv om det er mange gode sider med eit verkøy som dette er det samstundes viktig å reflektera rundt dei dårlege sidene.</p>
<section id="kjeldekritikk-og-filterboble" class="level3">
<h3 class="anchored" data-anchor-id="kjeldekritikk-og-filterboble">Kjeldekritikk og filterboble</h3>
<p>Sidan det er store språkmodellar som baserer seg på sannsyn som lagar svara må ein vera kritisk til informasjonen, også her. I tillegg må ein sjå over kva kjelder som ligg til grunn for svaret. Det er ikkje sjølvsagt at kjeldene som vert funnen og brukt er dei beste.</p>
<p>Sjølv om søkeresultata er tydeleg på kva kjelder som vert <strong>inkludert</strong> i svaret, er det ikkje like klart kva resultat som vert <strong>ekskludert</strong>. Frå erfaringa vår med tradisjonelle søkemotorar er dei fleste kjend med <a href="https://www.perplexity.ai/search/Kva-er-filterboble-e8lLtSqxTLqEYeRZfwC.hQ?s=c">filterbobla</a> ein kan hamna i basert på dataspor ein legg att på nettet. Sidan Perplexity ikkje er reklame- og annonsebasert unngår ein den type påverknad av søkeresultata. Samstundes er det gjerne slik at Perplexity samlar informasjon om bruksmønster hjå brukarane som skal vera med på å <em>tilpassa</em> søkeresultata og gjera dei relevante. Dette kan igjen vera med på å filtrera ut kjelder som kanskje kunne vore interessante. Erfaringa til no er likevel at i dei aller fleste søka eg har gjort finn verktøyet gode og som oftast pålitelege og relevante kjelder.</p>
</section>
<section id="pro-vs-gratis" class="level3">
<h3 class="anchored" data-anchor-id="pro-vs-gratis">Pro vs gratis</h3>
<p>For å få tilgang til dei kraftigaste språkmodellane (GPT-4, Claude 2.1, <a href="https://blog.perplexity.ai/blog/introducing-pplx-online-llms">Perplexity sin eigenutvikla modell</a> osb.) må ein ha Pro-abonnement til 200 USD i året. Utan dette abonnementet er det GPT-3.5 som vert nytta. Som mange kjenner til er denne tidlegare varianten ganske underlegen samanlikna med dei nyaste modellane på feltet.</p>
<p>Med Pro-abonnement får ein òg ubegrensa tilgang til <a href="https://blog.perplexity.ai/getting-started#copilot">Copilot</a> som hjelper til med å forstå spørsmålet og laga relevante søketermar. Dette er mogleg å få til i ChatGPT med å inkludera t.d. <code>still relevante oppklaringsspørsmål</code> i ledeteksten. Med pro-abonnement får ein også tilgang til Perplexity sine eigne API-ar og 5 USD i kreditt kvar månad.</p>
</section>
</section>
<section id="konklusjon" class="level2">
<h2 class="anchored" data-anchor-id="konklusjon">Konklusjon</h2>
<p>Alt i alt er Perplexity.ai ein spennande utfordrar til Google og dei etablerte tradisjonelle søkemotorane. Utviklinga går raskt og dei eigenutvikla modellane deira vert stadig betre. Når ein i tillegg ser på kor raskt dei samlar inn pengar og kven som støtter dei ser det ganske lovande ut for nykommaren. For min eigen del har eg bytta ut standard søkemotor i nettlesaren med Perplexity og lærer stadig nye ting om både verda og verktøyet 😊</p>
</section>
<section id="tips-og-triks" class="level2">
<h2 class="anchored" data-anchor-id="tips-og-triks">Tips og triks 🚀</h2>
<p>For å testa verktøyet skikkeleg og ikkje gløyma det vekk har er gjort det til standard søkemotor i nettlesaren min. Det er litt ulikt korleis ein gjer det frå nettlesar til nettlesar. Eg nyttar Brave som nettlesar (<a href="https://www.perplexity.ai/search/Brave-VS-Firefox-gRNt_tBDR5eRzt.YrfFxlg?s=c">ein av fleire med personvern- og datasporingsfokus</a>). Under <code>innstillingar/søkemotor</code> kan ein legga til Perplexity som søkemotor med følgjande lenke:</p>
<p><code>https://www.perplexity.ai/?q=%s</code></p>
<p>Med denne som standard vert alle søk frå adresselinja gjort i Perplexity. Om ein likevel vil gjera eit kjapt google-søk ligg det inne snarvegar for det. Startar ein søket/adresselinja med <code>:g</code> vert Google nytta likvel.</p>
<p><img src="https://lektorodd.github.io/posts/240112_perplexity/Brave Browser anim.gif" class="img-fluid"></p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document"><h2 class="anchored quarto-appendix-heading">Fotnotar</h2>

<ol>
<li id="fn1"><p><a href="https://blog.perplexity.ai/about" class="uri">https://blog.perplexity.ai/about</a>↩︎</p></li>
</ol>
</section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>KI</category>
  <category>verktøy</category>
  <category>tips</category>
  <guid>https://lektorodd.github.io/posts/240112_perplexity/</guid>
  <pubDate>Thu, 18 Jan 2024 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/240112_perplexity/robotsvarar.png" medium="image" type="image/png" height="82" width="144"/>
</item>
<item>
  <title>Nyttige simuleringskommandoar</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230511_simulering3/</link>
  <description><![CDATA[ 





<section id="komme-i-gang" class="level2">
<h2 class="anchored" data-anchor-id="komme-i-gang">Komme i gang</h2>
<p>Standard importering og oppsett av tilfeldighetsgenerator frå <code>NumPy</code>.</p>
<div id="cell-2" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span></code></pre></div>
</div>
</section>
<section id="uniforme-modellar" class="level2">
<h2 class="anchored" data-anchor-id="uniforme-modellar">Uniforme modellar</h2>
<p>Ofte enkelt å bruke heiltal når ein skal simulere noko med uniform sannsynsmodell - ein terning <span class="emoji" data-emoji="game_die">🎲</span>, myntkast <span class="emoji" data-emoji="coin">🪙</span>, gut/jente <span class="emoji" data-emoji="couple">👫</span> osv.</p>
<section id="døme---myntkast" class="level3">
<h3 class="anchored" data-anchor-id="døme---myntkast">Døme - myntkast</h3>
<p>Viss ein skal simulera myntkast kan ein la <code>0</code> vera mynt og <code>1</code> vera kron.</p>
<div id="cell-5" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall kast</span></span>
<span id="cb2-2">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># kasta simulert</span></span>
<span id="cb2-5">mynt_kast <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(mynt_kast)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 0 1 1 1 0 0 0 1 0]</code></pre>
</div>
</div>
<p>Dermed kan ein enkelt telja opp kor mange kron det var:</p>
<div id="cell-7" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(mynt_kast)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>5</code></pre>
</div>
</div>
</section>
</section>
<section id="binomiske-fordelingar" class="level2">
<h2 class="anchored" data-anchor-id="binomiske-fordelingar">Binomiske fordelingar</h2>
<p>Viss me ser på noko som er binomisk fordelt er <code>rng.binomial(n, p)</code> fin å nytta. <code>n</code> er antall <em>suksess</em> og <code>p</code> er sannsynet for <em>suksess</em> i kvart delforsøk. Her og kan ein bruka <code>size=</code> for å gjenta forsøket fleire gongar.</p>
<section id="døme" class="level3">
<h3 class="anchored" data-anchor-id="døme">Døme</h3>
<p>Plantar 100 frø. Sannsynet for at eitt frø spirer er 0.7 <span class="emoji" data-emoji="seedling">🌱</span></p>
<p>Dette kan me simulera:</p>
<div id="cell-9" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simulererer forsøket N gongar</span></span>
<span id="cb6-2">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb6-3"></span>
<span id="cb6-4">spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.binomial(n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, p<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span>
<span id="cb6-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(spirer)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[67 73 73 65 74 71 69 74 65 76]</code></pre>
</div>
</div>
<p>Tala her viser kor mange av dei 100 frøa som spirte i kvar av dei 10 gjennomførte forsøka.</p>
<p>Me kan telja opp kor mange av forsøka som tilfredsstiller eit vilkår. T.d. kor mange gongar spira 70 eller fleire av frøa?</p>
<div id="cell-11" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1">spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>array([False,  True,  True, False,  True,  True, False,  True, False,
        True])</code></pre>
</div>
</div>
<p>Ser at me her får sanningsvariablar. Python reknar <code>false</code> som 0 og <code>true</code> som 1. Dermed blir det lett å telja opp:</p>
<div id="cell-13" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>6</code></pre>
</div>
</div>
<p>Då kan me finna sannsynet på denne oppgåva ved simulering.</p>
<blockquote class="blockquote">
<p>Du plantar 100 frø, sannsynet for at eitt frø spirer er 0.7. Kva er sannsynet for at 70 eller fleire av frøa spirer?</p>
</blockquote>
<div id="cell-15" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall forsøk</span></span>
<span id="cb12-2">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simulering</span></span>
<span id="cb12-5">spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.binomial(n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, p<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.7</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span>
<span id="cb12-6"></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp gunstige utfall</span></span>
<span id="cb12-8">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">70</span>)</span>
<span id="cb12-9"></span>
<span id="cb12-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn relativ frekvens</span></span>
<span id="cb12-11">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N </span>
<span id="cb12-12"></span>
<span id="cb12-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># skriv ut sannsynet med 4 desimalar</span></span>
<span id="cb12-14"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(X ≥ 70) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(X ≥ 70) = 0.5490</code></pre>
</div>
</div>
</section>
</section>
<section id="hypergeometriske-fordelingar" class="level2">
<h2 class="anchored" data-anchor-id="hypergeometriske-fordelingar">Hypergeometriske fordelingar</h2>
<p>For hypergeometriske fordelingar kan ein nytta <code>rng.hypergeometric(ngood, nbad, nsample)</code>. I hypergeometriske fordelingar er populasjonen delt i to. <code>ngood</code> og <code>nbad</code> er storleiken på kvar av dei. <code>nsample</code> er storleiken på utvalet du trekk frå populasjonen.</p>
<blockquote class="blockquote">
<p>Det ligg 12 raude og 7 blå kuler i ei korg. Du trekk ut 5 kuler. Kva er sannsynet for at minst to av dei er raude?</p>
</blockquote>
<div id="cell-17" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb14-2"></span>
<span id="cb14-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># definerer kuleantall og utvalstorleik</span></span>
<span id="cb14-4">raude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span></span>
<span id="cb14-5">blå <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span></span>
<span id="cb14-6">utval <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb14-7"></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simulerer 10 trekk</span></span>
<span id="cb14-9">rng.hypergeometric(ngood<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>raude, nbad<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>blå, nsample<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>utval, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>array([2, 4, 3, 3, 3, 3, 2, 3, 3, 3])</code></pre>
</div>
</div>
<p>Tala me får ut her er antall raude (ngood) i kvart forsøk. Resten av utvalet blir då blå.</p>
<p>Bruker dette til å løysa oppgåva.</p>
<div id="cell-19" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb16-2"></span>
<span id="cb16-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># definerer kuleantall og utvalstorleik</span></span>
<span id="cb16-4">raude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span></span>
<span id="cb16-5">blå <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span></span>
<span id="cb16-6">utval <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb16-7"></span>
<span id="cb16-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simulerer </span></span>
<span id="cb16-9">trekte_kuler <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.hypergeometric(</span>
<span id="cb16-10">    ngood<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>raude, </span>
<span id="cb16-11">    nbad<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>blå, </span>
<span id="cb16-12">    nsample<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>utval, </span>
<span id="cb16-13">    size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N</span>
<span id="cb16-14">)</span>
<span id="cb16-15"></span>
<span id="cb16-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp gunstige</span></span>
<span id="cb16-17">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(trekte_kuler <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb16-18"></span>
<span id="cb16-19">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb16-20"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(minst to raude) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(minst to raude) = 0.9619</code></pre>
</div>
</div>
</section>
<section id="normalfordeling" class="level2">
<h2 class="anchored" data-anchor-id="normalfordeling">Normalfordeling</h2>
<p>Her bruker me <code>rng.normal(loc, scale)</code> der <code>loc</code> er gjennomsnittet/forventningsverdien (<img src="https://latex.codecogs.com/png.latex?%5Cmu">) og <code>scale</code> er standardavviket (<img src="https://latex.codecogs.com/png.latex?%5Csigma">).</p>
<section id="døme-1" class="level3">
<h3 class="anchored" data-anchor-id="døme-1">Døme</h3>
<p>På ein skule er gjennomsnittshøgda på elevane 172 cm og standardavviket 9 cm. Kva er sannsynet for at ein tilfeldig elev er høgare enn 180 cm?</p>
<div id="cell-21" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb18-2"></span>
<span id="cb18-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># trekk tilfeldige elevar</span></span>
<span id="cb18-4">elevar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.normal(loc<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">172</span>, scale<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span>
<span id="cb18-5"></span>
<span id="cb18-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp og finn sannsynet</span></span>
<span id="cb18-7">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(elevar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>)</span>
<span id="cb18-8">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb18-9"></span>
<span id="cb18-10"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Sannsynet er </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sannsynet er 0.1876</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Samansett simulering
</div>
</div>
<div class="callout-body-container callout-body">
<p>I <a href="../../posts/230303_simulering2/index.html">dette</a> innlegget har eg vist korleis simuleringsoppgåva frå eksempelsettet til S2 kan løysast (på tre ulike måtar).</p>
</div>
</div>
<p>I tillegg denne er <code>rng.standard_normal()</code> eit alternativ om ein jobbar med noko som er standard normalfordelt.</p>
</section>
</section>
<section id="også-nyttig---rng.choice" class="level2">
<h2 class="anchored" data-anchor-id="også-nyttig---rng.choice">Også nyttig - <code>rng.choice()</code></h2>
<p>Trekke andre ting enn tal med <code>rng.choice</code></p>
<blockquote class="blockquote">
<p>I ei skål ligg det 7 banan-twist og 3 daim-twist. Kva er sannsynet for at me får to banan når me trekk ut to bitar frå skåla.</p>
</blockquote>
<p>Startar med å “lage” twistskåla.</p>
<div id="cell-25" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1">twistskål <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banan"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Daim"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb20-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(twistskål)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Banan', 'Banan', 'Banan', 'Banan', 'Banan', 'Banan', 'Banan', 'Daim', 'Daim', 'Daim']</code></pre>
</div>
</div>
<section id="med-tilbakelegging" class="level3">
<h3 class="anchored" data-anchor-id="med-tilbakelegging">med tilbakelegging</h3>
<p>Ser først på forsøket <em>med tilbakelegging</em> (dette er default i <code>choice</code>).</p>
<div id="cell-27" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb22-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb22-2"></span>
<span id="cb22-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tellevariabel BB &lt;- banan+banan</span></span>
<span id="cb22-4">BB <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb22-5"></span>
<span id="cb22-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(N):</span>
<span id="cb22-7">    trekt_twist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.choice(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>twistskål, size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb22-8">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># legg til 1 om bit1 OG bit2 er banan. Legg til 0 om ikkje... </span></span>
<span id="cb22-9">    BB <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> ((trekt_twist[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banan"</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> (trekt_twist[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banan"</span>))</span>
<span id="cb22-10"></span>
<span id="cb22-11">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BB <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb22-12"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(BB) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(BB) = 0.4897</code></pre>
</div>
</div>
</section>
<section id="utan-tilbakelegging" class="level3">
<h3 class="anchored" data-anchor-id="utan-tilbakelegging">utan tilbakelegging</h3>
<p>Dette er nesten heilt likt, men me legg til argumentet <code>replace=False</code>.</p>
<div id="cell-29" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb24-2"></span>
<span id="cb24-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tellevariabel BB &lt;- banan+banan</span></span>
<span id="cb24-4">BB <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb24-5"></span>
<span id="cb24-6"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(N):</span>
<span id="cb24-7">    trekt_twist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.choice(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>twistskål, size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, replace<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb24-8">    BB <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> ((trekt_twist[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banan"</span>) <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">and</span> (trekt_twist[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banan"</span>))</span>
<span id="cb24-9"></span>
<span id="cb24-10">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> BB <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb24-11"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(BB) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(BB) = 0.4661</code></pre>
</div>
</div>
</section>
<section id="ikkje-uniformt-sannsyn" class="level3">
<h3 class="anchored" data-anchor-id="ikkje-uniformt-sannsyn">ikkje-uniformt sannsyn</h3>
<p>Sannsynet over var ikkje-uniformt, men såpass enkelt at me laga ei liste med heile utfallsrommet. Det vert fort upraktisk om me har mange ulike utfall med store variasjonar i antall. Me kan heller legga inn sannsynet for kvart av utfalla direkte i <code>rng.choice()</code></p>
<div id="cell-31" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1">twistar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Banan"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Daim"</span>]</span>
<span id="cb26-2">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]</span>
<span id="cb26-3"></span>
<span id="cb26-4">to_twist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.choice(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>twistar, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, p<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>sannsyn)</span>
<span id="cb26-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(to_twist)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Banan' 'Daim']</code></pre>
</div>
</div>
<p>Dette er fint t.d. ved simulering av lykkehjul der ulike fargar har ulik storleik, eller for å simulera blodtype hos menneske.</p>
</section>
</section>
<section id="oppsummering" class="level2">
<h2 class="anchored" data-anchor-id="oppsummering">Oppsummering</h2>
<p>Det var ein kort gjennomgang av dei viktigaste kommandoane me treng for simulering i S1 og S2. Det er ei rekka andre valg i <em>random number generator</em>-en. Sjekk gjerne ut <a href="https://numpy.org/doc/stable/reference/random/generator.html">dokumentasjonen</a>.</p>
<p>Denne sida kan du lagra og ha med på eksamen om du vil 😎</p>
<p>Lykke til! <span class="emoji" data-emoji="student">🧑‍🎓</span></p>
<hr>
<p><a href="https://www.freepik.com/free-vector/colorful-wheel-luck-with-money-spinning-fortune-wheel-las-vegas-prize_2553295.htm#query=wheel%20fortune&amp;position=0&amp;from_view=search&amp;track=ais">Miniatyrbilete laga av katemangostar på Freepik</a></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>programmering</category>
  <category>s-matte</category>
  <category>simulering</category>
  <category>eksamen</category>
  <guid>https://lektorodd.github.io/posts/230511_simulering3/</guid>
  <pubDate>Wed, 10 May 2023 22:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230511_simulering3/lykkehjul.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Jordskjelvpython</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230425_jordskjelv/</link>
  <description><![CDATA[ 





<section id="jordskjelvprogrammering-i-geofag-1" class="level1">
<h1>Jordskjelvprogrammering i geofag 1</h1>
<p>I dette opplegget tek me utgangspunkt i store mengdar ekte jordskjelvdata. Desse vil me systematisera og visualisera ved hjelp av biblioteket <code>geopandas</code> i Python <span class="emoji" data-emoji="snake">🐍</span> <br> Døme på ein av figurane me kjem til å laga ser du under.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/jordskjelv_stillehavet_djupne.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
<figcaption><span class="emoji" data-emoji="camera">📷</span> Døme på figur</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Merk
</div>
</div>
<div class="callout-body-container callout-body">
<p>For å gjennomføra denne øvinga treng ein biblioteket <code>geopandas</code>. Viss ein nyttar <code>anaconda</code> eller <code>miniconda</code> så er det enklaste å laga eit eige <code>enviroment</code> for å ikkje klussa til den «vanlege» python-installasjonen. Oppskrifta du finn <a href="https://geopandas.org/en/stable/getting_started/install.html">her</a>, funkar fint!</p>
<p><strong>OBS:</strong> For å installera Jupyter Lab kan du endre siste linja til</p>
<div class="sourceCode" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource {shell} number-lines code-with-copy"><code class="sourceCode"><span id="cb1-1">conda install python=3 geopandas jupyterlab</span></code></pre></div>
</div>
</div>
<section id="laste-ned-data" class="level2">
<h2 class="anchored" data-anchor-id="laste-ned-data">Laste ned data</h2>
<p>Først treng me eit datasett. USGS har ein eigen «jordskjelvkatalog» der ein kan søka etter og lasta ned jordskjelvdata. Katalogen finn du <a href="https://earthquake.usgs.gov/earthquakes/search/">her</a>.</p>
<p>Det meste ein kan lasta ned er 20 000 jordskjelv, så me må gjera nokre val i innstillingane for å få dekka eit lengre tidsrom.</p>
<p><strong>Basic options</strong> <br> <strong><code>Magnitude</code></strong> bør ha <code>Minimum</code> sett til 5,5. <br> <strong><code>Date &amp; Time</code></strong> sin <code>Start</code> bør vera så tidleg som mogleg (gjerne 1950 berre for å ta litt i…) <br> <strong><code>Geographic Region</code></strong> står på <code>World</code></p>
<p><strong>Output options</strong> <br> <strong><code>Format</code></strong> <span class="emoji" data-emoji="arrow_right">➡️</span> <code>csv</code> <br> <strong><code>Order By</code></strong> <span class="emoji" data-emoji="arrow_right">➡️</span> <code>Time - Newest First</code> <br> <strong><code>Limit Results</code></strong> bør ha <code>Number of Events</code> sett til 20000 (for å unngå feilmelding om for mange treff)</p>
<p>Den nedlasta fila bør ligga i same mappe som Jupyter-notatboka (eller <code>.py</code>-fila). For å gjera det enklare for oss sjølv kan me òg endra namn på fila til <code>skjelv.csv</code> eller liknande.</p>
<p><span class="emoji" data-emoji="green_circle">🟢</span> Eg tilrår på det sterkaste å gjera denne type programmering/utforsking i ei Jupyter-notatbok</p>
</section>
<section id="innlesing-av-data" class="level2">
<h2 class="anchored" data-anchor-id="innlesing-av-data">Innlesing av data</h2>
<p>Me startar med å importere naudsynte bibliotek.</p>
<div id="cell-5" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb2-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> geopandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> gpd</span>
<span id="cb2-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb2-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span></code></pre></div>
</div>
<p>Bruker så <code>pandas</code> for å lesa inn <code>csv</code>-fila.</p>
<div id="cell-7" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1">skjelv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"skjelv.csv"</span>)</span></code></pre></div>
</div>
<p>Undersøker korleis den innleste tabellen ser ut</p>
<div id="cell-9" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1">skjelv.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>(20000, 22)</code></pre>
</div>
</div>
<p><code>(20000, 22)</code> betyr altså at me her har ein tabell med 20 000 rader og 22 kolonner. Ser på dei fem første radene i tabellen.</p>
<div id="cell-11" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1">skjelv.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">magType</th>
<th data-quarto-table-cell-role="th">nst</th>
<th data-quarto-table-cell-role="th">gap</th>
<th data-quarto-table-cell-role="th">dmin</th>
<th data-quarto-table-cell-role="th">rms</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">updated</th>
<th data-quarto-table-cell-role="th">place</th>
<th data-quarto-table-cell-role="th">type</th>
<th data-quarto-table-cell-role="th">horizontalError</th>
<th data-quarto-table-cell-role="th">depthError</th>
<th data-quarto-table-cell-role="th">magError</th>
<th data-quarto-table-cell-role="th">magNst</th>
<th data-quarto-table-cell-role="th">status</th>
<th data-quarto-table-cell-role="th">locationSource</th>
<th data-quarto-table-cell-role="th">magSource</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-04-24T20:00:55.086Z</td>
<td>-0.7810</td>
<td>98.5339</td>
<td>15.462</td>
<td>7.1</td>
<td>mww</td>
<td>70.0</td>
<td>58.0</td>
<td>2.282</td>
<td>0.91</td>
<td>...</td>
<td>2023-04-25T07:46:47.683Z</td>
<td>170 km SSE of Teluk Dalam, Indonesia</td>
<td>earthquake</td>
<td>7.35</td>
<td>3.944</td>
<td>0.060</td>
<td>27.0</td>
<td>reviewed</td>
<td>us</td>
<td>us</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-04-24T02:17:56.596Z</td>
<td>-60.3893</td>
<td>-26.1923</td>
<td>10.000</td>
<td>5.6</td>
<td>mb</td>
<td>80.0</td>
<td>68.0</td>
<td>19.029</td>
<td>0.60</td>
<td>...</td>
<td>2023-04-25T02:21:51.035Z</td>
<td>South Sandwich Islands region</td>
<td>earthquake</td>
<td>11.61</td>
<td>1.868</td>
<td>0.054</td>
<td>120.0</td>
<td>reviewed</td>
<td>us</td>
<td>us</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-04-24T00:41:55.460Z</td>
<td>-29.9676</td>
<td>-177.8264</td>
<td>43.063</td>
<td>7.1</td>
<td>mww</td>
<td>126.0</td>
<td>23.0</td>
<td>0.708</td>
<td>0.50</td>
<td>...</td>
<td>2023-04-25T00:46:45.081Z</td>
<td>NaN</td>
<td>earthquake</td>
<td>8.37</td>
<td>4.305</td>
<td>0.048</td>
<td>42.0</td>
<td>reviewed</td>
<td>us</td>
<td>us</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-04-22T21:17:45.986Z</td>
<td>-0.9589</td>
<td>98.4839</td>
<td>10.000</td>
<td>5.7</td>
<td>mww</td>
<td>124.0</td>
<td>53.0</td>
<td>2.424</td>
<td>0.74</td>
<td>...</td>
<td>2023-04-23T21:21:04.014Z</td>
<td>170 km NW of Tuapejat, Indonesia</td>
<td>earthquake</td>
<td>7.18</td>
<td>1.806</td>
<td>0.060</td>
<td>27.0</td>
<td>reviewed</td>
<td>us</td>
<td>us</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-04-22T17:09:45.448Z</td>
<td>-0.7645</td>
<td>98.5780</td>
<td>27.385</td>
<td>5.8</td>
<td>mww</td>
<td>178.0</td>
<td>34.0</td>
<td>2.286</td>
<td>0.80</td>
<td>...</td>
<td>2023-04-23T17:12:44.119Z</td>
<td>Kepulauan Batu, Indonesia</td>
<td>earthquake</td>
<td>7.17</td>
<td>3.202</td>
<td>0.054</td>
<td>33.0</td>
<td>reviewed</td>
<td>us</td>
<td>us</td>
</tr>
</tbody>
</table>

<p>5 rows × 22 columns</p>
</div>
</div>
</div>
<p>Me kan sjå litt nærare på dei statistikk frå dei numeriske kolonnene med å bruka <code>describe()</code></p>
<div id="cell-13" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1">skjelv.describe()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">nst</th>
<th data-quarto-table-cell-role="th">gap</th>
<th data-quarto-table-cell-role="th">dmin</th>
<th data-quarto-table-cell-role="th">rms</th>
<th data-quarto-table-cell-role="th">horizontalError</th>
<th data-quarto-table-cell-role="th">depthError</th>
<th data-quarto-table-cell-role="th">magError</th>
<th data-quarto-table-cell-role="th">magNst</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">count</td>
<td>20000.000000</td>
<td>20000.000000</td>
<td>20000.000000</td>
<td>20000.000000</td>
<td>7472.000000</td>
<td>10086.000000</td>
<td>4430.000000</td>
<td>19759.000000</td>
<td>3972.000000</td>
<td>7242.000000</td>
<td>3136.000000</td>
<td>4912.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">mean</td>
<td>-0.308104</td>
<td>33.349754</td>
<td>70.485546</td>
<td>5.873034</td>
<td>267.023555</td>
<td>43.510441</td>
<td>4.347339</td>
<td>0.998922</td>
<td>7.115259</td>
<td>3.991525</td>
<td>0.059346</td>
<td>49.099959</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">std</td>
<td>30.063869</td>
<td>126.560024</td>
<td>127.629767</td>
<td>0.420587</td>
<td>160.409087</td>
<td>28.936826</td>
<td>5.492807</td>
<td>0.203466</td>
<td>2.309055</td>
<td>7.902934</td>
<td>0.031396</td>
<td>62.611998</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">min</td>
<td>-77.080000</td>
<td>-179.997000</td>
<td>-3.000000</td>
<td>5.500000</td>
<td>0.000000</td>
<td>8.000000</td>
<td>0.008000</td>
<td>0.040000</td>
<td>0.085000</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">25%</td>
<td>-20.436500</td>
<td>-82.415450</td>
<td>10.000000</td>
<td>5.600000</td>
<td>138.000000</td>
<td>24.000000</td>
<td>1.167250</td>
<td>0.880000</td>
<td>5.800000</td>
<td>1.800000</td>
<td>0.046000</td>
<td>19.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">50%</td>
<td>-4.496500</td>
<td>96.297000</td>
<td>31.700000</td>
<td>5.700000</td>
<td>242.000000</td>
<td>36.000000</td>
<td>2.535000</td>
<td>1.000000</td>
<td>7.100000</td>
<td>2.000000</td>
<td>0.055000</td>
<td>33.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">75%</td>
<td>22.324750</td>
<td>143.512750</td>
<td>50.300000</td>
<td>6.000000</td>
<td>372.000000</td>
<td>54.000000</td>
<td>5.144000</td>
<td>1.110000</td>
<td>8.500000</td>
<td>4.400000</td>
<td>0.068000</td>
<td>56.250000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">max</td>
<td>86.922900</td>
<td>179.998100</td>
<td>700.000000</td>
<td>9.100000</td>
<td>934.000000</td>
<td>313.000000</td>
<td>39.730000</td>
<td>2.820000</td>
<td>15.800000</td>
<td>569.200000</td>
<td>0.700000</td>
<td>941.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>I kolonna <code>mag</code> (styrken) ser me at både gjennomsnittet (5,87) og medianen (5,7) er ganske låge. Hugs på at den lågaste verdien her er 5,5. Tala viser oss at 50% av dei 20000 skjelva er mellom 5,5 og 5,7 i styrke. Me ser òg at gjennomsnittsdjupna på skjelva er ca. 70,5 km (<code>depth</code>).</p>
<p>Som me har sett over har tabellen mange kolonner, ikkje alle er like relevante for oss. Me kan sortera ut dei me treng vidare. Skriv først ut ei liste med kolonnenamn for å få oversikt over alle kolonnene.</p>
<div id="cell-15" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1">skjelv.columns</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>Index(['time', 'latitude', 'longitude', 'depth', 'mag', 'magType', 'nst',
       'gap', 'dmin', 'rms', 'net', 'id', 'updated', 'place', 'type',
       'horizontalError', 'depthError', 'magError', 'magNst', 'status',
       'locationSource', 'magSource'],
      dtype='object')</code></pre>
</div>
</div>
</section>
<section id="sortere-i-datamaterialet" class="level2">
<h2 class="anchored" data-anchor-id="sortere-i-datamaterialet">Sortere i datamaterialet</h2>
<p>Det første me gjer er å luka ut dei radene som ikkje er jordskjelv. I koden under tek me kun vare på dei radene der <code>type</code> er <code>earthquake</code>.</p>
<div id="cell-17" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1">skjelv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> skjelv[skjelv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"type"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"earthquake"</span>]</span>
<span id="cb10-2">skjelv.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>(19890, 22)</code></pre>
</div>
</div>
<p>Me ser at tabellen vart nokre rader kortare.</p>
<p>Plukker ut dei mest relevante kolonnene. Dato, lengde- og breddegrad, djupne og styrke:</p>
<div id="cell-19" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1">skjelv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> skjelv[[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"time"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latitude"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"longitude"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"depth"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mag"</span>]]</span>
<span id="cb12-2">skjelv.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-04-24T20:00:55.086Z</td>
<td>-0.7810</td>
<td>98.5339</td>
<td>15.462</td>
<td>7.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-04-24T02:17:56.596Z</td>
<td>-60.3893</td>
<td>-26.1923</td>
<td>10.000</td>
<td>5.6</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-04-24T00:41:55.460Z</td>
<td>-29.9676</td>
<td>-177.8264</td>
<td>43.063</td>
<td>7.1</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-04-22T21:17:45.986Z</td>
<td>-0.9589</td>
<td>98.4839</td>
<td>10.000</td>
<td>5.7</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-04-22T17:09:45.448Z</td>
<td>-0.7645</td>
<td>98.5780</td>
<td>27.385</td>
<td>5.8</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Sjekkar for ordens skuld kva tid det første skjelvet er frå. Ser på dei siste 5 radene i tabellen.</p>
<div id="cell-21" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1">skjelv.tail(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">19994</td>
<td>1982-08-06T20:46:13.910Z</td>
<td>-8.319</td>
<td>120.416</td>
<td>49.9</td>
<td>5.5</td>
<td>POINT (120.41600 -8.31900)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19995</td>
<td>1982-08-06T20:40:52.200Z</td>
<td>-8.375</td>
<td>120.577</td>
<td>45.7</td>
<td>5.9</td>
<td>POINT (120.57700 -8.37500)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19996</td>
<td>1982-08-05T20:42:07.300Z</td>
<td>-12.347</td>
<td>166.247</td>
<td>20.0</td>
<td>5.5</td>
<td>POINT (166.24700 -12.34700)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">19997</td>
<td>1982-08-05T20:32:52.950Z</td>
<td>-12.597</td>
<td>165.931</td>
<td>30.7</td>
<td>7.0</td>
<td>POINT (165.93100 -12.59700)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">19999</td>
<td>1982-08-05T07:28:08.810Z</td>
<td>-5.767</td>
<td>146.567</td>
<td>113.0</td>
<td>5.6</td>
<td>POINT (146.56700 -5.76700)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="visuell-oversikt-over-tabellen" class="level3">
<h3 class="anchored" data-anchor-id="visuell-oversikt-over-tabellen">Visuell oversikt over tabellen</h3>
<p>For å sjå (og presentera) fordelinga av styrke og djupne kan me t.d. laga heilt enkle boksplot. Startar med eit for styrken <span class="emoji" data-emoji="muscle">💪</span></p>
<div id="cell-23" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1">boksplot <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> skjelv.boxplot(column <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mag"</span>, figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>), color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb14-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Boksplott over styrkene på skjelva"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb14-3">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Magnitude"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb14-4">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/index_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Figuren her viser at jordskjelva i all hovudsak er mellom 5,5 og ca. 6,6. Dei sterkare skjelva er så få at dei vert sett på som avvik (<em>outliers</em>).</p>
<div id="cell-25" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1">boksplot <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> skjelv.boxplot(column <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"depth"</span>, figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>), color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>)</span>
<span id="cb15-2">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Boksplott over djupne på skjelva"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>)</span>
<span id="cb15-3">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Djupne (km)"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb15-4">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/index_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Figuren for djune viser oss at dei aller fleste skjelva er mellom 0 og 110 km djupe.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tips til meir visualisering <span class="emoji" data-emoji="eyes">👀</span>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Det går an å prøva seg fram med ulike visualiseringar, feks. histogram/stolpediagram. Eventuelt kan ein sjekka ut <code>seaborn</code> <a href="https://seaborn.pydata.org"><em>dokumentasjon her</em></a> og laga enno fleire fancy figurar, feks. fiolinplot eller andre fine oversikter.</p>
</div>
</div>
</section>
</section>
<section id="geodataframe" class="level2">
<h2 class="anchored" data-anchor-id="geodataframe">GeoDataFrame</h2>
<p>Først lagar me ei <code>geodataframe</code> frå vår opprinnelege <code>dataframe</code> (skjelv). Forskjellen på desse to er at førstnevnte har ei eigen kolonne <code>geometry</code>, som er punkt, linjer eller flater. I dette tilfelet punkt, som <code>geopandas</code> finn i lengde- og breiddegrad-kolonnene.</p>
<div id="cell-28" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1">skjelv_gdf <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gpd.GeoDataFrame(</span>
<span id="cb16-2">    skjelv, </span>
<span id="cb16-3">    geometry <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gpd.points_from_xy(</span>
<span id="cb16-4">        skjelv.longitude, </span>
<span id="cb16-5">        skjelv.latitude</span>
<span id="cb16-6">        )</span>
<span id="cb16-7">    )</span>
<span id="cb16-8">skjelv_gdf.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-04-24T20:00:55.086Z</td>
<td>-0.7810</td>
<td>98.5339</td>
<td>15.462</td>
<td>7.1</td>
<td>POINT (98.53390 -0.78100)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-04-24T02:17:56.596Z</td>
<td>-60.3893</td>
<td>-26.1923</td>
<td>10.000</td>
<td>5.6</td>
<td>POINT (-26.19230 -60.38930)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-04-24T00:41:55.460Z</td>
<td>-29.9676</td>
<td>-177.8264</td>
<td>43.063</td>
<td>7.1</td>
<td>POINT (-177.82640 -29.96760)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-04-22T21:17:45.986Z</td>
<td>-0.9589</td>
<td>98.4839</td>
<td>10.000</td>
<td>5.7</td>
<td>POINT (98.48390 -0.95890)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-04-22T17:09:45.448Z</td>
<td>-0.7645</td>
<td>98.5780</td>
<td>27.385</td>
<td>5.8</td>
<td>POINT (98.57800 -0.76450)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="plotting" class="level2">
<h2 class="anchored" data-anchor-id="plotting">Plotting</h2>
<p>No er alt klart for å starta med plotting. Me lagar eit <em>basekart</em> av verda og plottar jordskjelva oppå dette.</p>
<div id="cell-30" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bakgrunnskart - data</span></span>
<span id="cb17-2">world <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gpd.read_file(gpd.datasets.get_path(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"naturalearth_lowres"</span>))</span>
<span id="cb17-3"></span>
<span id="cb17-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotte bakgrunnskart</span></span>
<span id="cb17-5">base <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> world.plot(color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"linen"</span>, </span>
<span id="cb17-6">                  edgecolor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray"</span>, </span>
<span id="cb17-7">                  figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb17-8">                 )</span>
<span id="cb17-9"></span>
<span id="cb17-10">skjelv_gdf.plot(ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base, markersize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>) </span>
<span id="cb17-11"></span>
<span id="cb17-12">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jordskjelv sterkare enn 5,5 frå 1982 - 2023"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>)</span>
<span id="cb17-13">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/index_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<section id="variable-storleik-på-markørane" class="level3">
<h3 class="anchored" data-anchor-id="variable-storleik-på-markørane">Variable storleik på markørane</h3>
<p>For å få fram ulikskapar mellom skjelva kan me plotta punkta slik at dei vert større di sterkare skjelva dei representerer er. Skjelva er frå 5.5 til 9.1 i styrke. Legg til ei ny kolonne i tabellen for storleik på markør. For at den skal gå frå 1 og oppover, trekk me 4,5 frå verdien til <code>mag</code>.</p>
<div id="cell-32" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1">skjelv_gdf[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"markør"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> skjelv_gdf[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mag"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">4.5</span></span>
<span id="cb18-2">skjelv_gdf.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">markør</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-04-24T20:00:55.086Z</td>
<td>-0.7810</td>
<td>98.5339</td>
<td>15.462</td>
<td>7.1</td>
<td>POINT (98.53390 -0.78100)</td>
<td>2.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-04-24T02:17:56.596Z</td>
<td>-60.3893</td>
<td>-26.1923</td>
<td>10.000</td>
<td>5.6</td>
<td>POINT (-26.19230 -60.38930)</td>
<td>1.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-04-24T00:41:55.460Z</td>
<td>-29.9676</td>
<td>-177.8264</td>
<td>43.063</td>
<td>7.1</td>
<td>POINT (-177.82640 -29.96760)</td>
<td>2.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-04-22T21:17:45.986Z</td>
<td>-0.9589</td>
<td>98.4839</td>
<td>10.000</td>
<td>5.7</td>
<td>POINT (98.48390 -0.95890)</td>
<td>1.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-04-22T17:09:45.448Z</td>
<td>-0.7645</td>
<td>98.5780</td>
<td>27.385</td>
<td>5.8</td>
<td>POINT (98.57800 -0.76450)</td>
<td>1.3</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Plottar på nytt. Merk at me endrar typen til <code>scatter</code> som gjer at markørstorleiken får eit anna argument <code>s</code> i staden for <code>markersize</code>. Prøv deg gjerne fram for å finna ein fin verdi for storleiken. Eg endte opp med <code>3*skjelv_gdf["markør"]**4</code>.</p>
<div id="cell-34" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb19" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb19-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bakgrunnskart</span></span>
<span id="cb19-2">world <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gpd.read_file(gpd.datasets.get_path(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"naturalearth_lowres"</span>))</span>
<span id="cb19-3"></span>
<span id="cb19-4">base <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> world.plot(color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bisque"</span>, </span>
<span id="cb19-5">                  edgecolor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gray"</span>, </span>
<span id="cb19-6">                  figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>)</span>
<span id="cb19-7">                 )</span>
<span id="cb19-8"></span>
<span id="cb19-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plottar skjelva</span></span>
<span id="cb19-10">skjelv_gdf.plot(ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base, </span>
<span id="cb19-11">                kind <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"scatter"</span>, </span>
<span id="cb19-12">                x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"longitude"</span>, </span>
<span id="cb19-13">                y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"latitude"</span>,</span>
<span id="cb19-14">                marker <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"o"</span>,</span>
<span id="cb19-15">                color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"salmon"</span>,</span>
<span id="cb19-16">                s <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>skjelv_gdf[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"markør"</span>]<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># størrelse på pkt. </span></span>
<span id="cb19-17">                edgecolor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"maroon"</span>,</span>
<span id="cb19-18">                alpha <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.6</span> <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># gjennomsiktighet</span></span>
<span id="cb19-19">               )</span>
<span id="cb19-20"></span>
<span id="cb19-21">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Jordskjelv sterkare enn 5,5 frå 1982 - 2023 </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">22</span>)</span>
<span id="cb19-22">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lengdegrad"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb19-23">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Breiddegrad"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb19-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#plt.savefig("jordskjelv_verda_styrke.png", dpi = 300) # &lt;-- bruk denne for å lagra figuren</span></span>
<span id="cb19-25">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/index_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="avgrense-område" class="level2">
<h2 class="anchored" data-anchor-id="avgrense-område">Avgrense område</h2>
<p>For å få betre oversikt kan me zooma inn på eit avgrensa område av jorda. Me kan t.d. sjå på områda rundt Indonesia. Les av omtrentlege lengde- og breddegrader på oversiktskartet. Legg avgrensingane inn som eigne variablar, slik at det er lett å endra dei seinare.</p>
<div id="cell-36" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Avgrensingar for rådata og kartplotting</span></span>
<span id="cb20-2">lat_min <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span></span>
<span id="cb20-3">lat_maks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">60</span></span>
<span id="cb20-4">long_min <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">80</span></span>
<span id="cb20-5">long_maks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">170</span></span></code></pre></div>
</div>
<p>Bruker vidare avgrensingane til å sortera ut ein eigen tabell med dei aktuelle skjelva.</p>
<div id="cell-38" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb21" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb21-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lagar ny gdf til avgrensa område</span></span>
<span id="cb21-2">område_skjelv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> skjelv_gdf[(skjelv_gdf.latitude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> lat_min) </span>
<span id="cb21-3">                           <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (skjelv_gdf.latitude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> lat_maks)</span>
<span id="cb21-4">                           <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (skjelv_gdf.longitude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> long_min) </span>
<span id="cb21-5">                           <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (skjelv_gdf.longitude <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span> long_maks)</span>
<span id="cb21-6">                          ]</span>
<span id="cb21-7"></span>
<span id="cb21-8">område_skjelv.shape</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>(9302, 7)</code></pre>
</div>
</div>
<p>Her ser me at me framleis har 9302 skjelv i tabellen, så omlag halvparten av dei 20 000 skjelva er frå det avgrensa området. Tar me ein kikk på dei 10 første linjene så ser me at indeksen ikkje er heilt i orden.</p>
<div id="cell-40" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb23" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb23-1">område_skjelv.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="59">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">markør</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-04-24T20:00:55.086Z</td>
<td>-0.7810</td>
<td>98.5339</td>
<td>15.462</td>
<td>7.1</td>
<td>POINT (98.53390 -0.78100)</td>
<td>2.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-04-22T21:17:45.986Z</td>
<td>-0.9589</td>
<td>98.4839</td>
<td>10.000</td>
<td>5.7</td>
<td>POINT (98.48390 -0.95890)</td>
<td>1.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-04-22T17:09:45.448Z</td>
<td>-0.7645</td>
<td>98.5780</td>
<td>27.385</td>
<td>5.8</td>
<td>POINT (98.57800 -0.76450)</td>
<td>1.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2023-04-22T09:15:54.527Z</td>
<td>-5.3425</td>
<td>125.6370</td>
<td>20.667</td>
<td>5.5</td>
<td>POINT (125.63700 -5.34250)</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>2023-04-22T08:23:42.518Z</td>
<td>-5.2697</td>
<td>125.5950</td>
<td>7.270</td>
<td>6.0</td>
<td>POINT (125.59500 -5.26970)</td>
<td>1.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">8</td>
<td>2023-04-21T10:21:13.739Z</td>
<td>2.7929</td>
<td>127.0480</td>
<td>24.575</td>
<td>5.9</td>
<td>POINT (127.04800 2.79290)</td>
<td>1.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">10</td>
<td>2023-04-19T09:06:05.200Z</td>
<td>-5.9994</td>
<td>149.6062</td>
<td>55.674</td>
<td>6.3</td>
<td>POINT (149.60620 -5.99940)</td>
<td>1.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">12</td>
<td>2023-04-18T02:40:53.003Z</td>
<td>54.1600</td>
<td>159.9190</td>
<td>110.846</td>
<td>5.6</td>
<td>POINT (159.91900 54.16000)</td>
<td>1.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">13</td>
<td>2023-04-17T11:05:55.474Z</td>
<td>-4.8912</td>
<td>102.9538</td>
<td>58.386</td>
<td>5.5</td>
<td>POINT (102.95380 -4.89120)</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">14</td>
<td>2023-04-15T15:07:06.934Z</td>
<td>-4.8648</td>
<td>102.9744</td>
<td>56.688</td>
<td>5.5</td>
<td>POINT (102.97440 -4.86480)</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Ikkje at det er veldig viktig no, men om me vil så kan me ordna dette lett.</p>
<div id="cell-42" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb24-1">område_skjelv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> område_skjelv.reset_index(drop<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>)</span>
<span id="cb24-2">område_skjelv.head(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">time</th>
<th data-quarto-table-cell-role="th">latitude</th>
<th data-quarto-table-cell-role="th">longitude</th>
<th data-quarto-table-cell-role="th">depth</th>
<th data-quarto-table-cell-role="th">mag</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">markør</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2023-04-24T20:00:55.086Z</td>
<td>-0.7810</td>
<td>98.5339</td>
<td>15.462</td>
<td>7.1</td>
<td>POINT (98.53390 -0.78100)</td>
<td>2.6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2023-04-22T21:17:45.986Z</td>
<td>-0.9589</td>
<td>98.4839</td>
<td>10.000</td>
<td>5.7</td>
<td>POINT (98.48390 -0.95890)</td>
<td>1.2</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2023-04-22T17:09:45.448Z</td>
<td>-0.7645</td>
<td>98.5780</td>
<td>27.385</td>
<td>5.8</td>
<td>POINT (98.57800 -0.76450)</td>
<td>1.3</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2023-04-22T09:15:54.527Z</td>
<td>-5.3425</td>
<td>125.6370</td>
<td>20.667</td>
<td>5.5</td>
<td>POINT (125.63700 -5.34250)</td>
<td>1.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2023-04-22T08:23:42.518Z</td>
<td>-5.2697</td>
<td>125.5950</td>
<td>7.270</td>
<td>6.0</td>
<td>POINT (125.59500 -5.26970)</td>
<td>1.5</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>2023-04-21T10:21:13.739Z</td>
<td>2.7929</td>
<td>127.0480</td>
<td>24.575</td>
<td>5.9</td>
<td>POINT (127.04800 2.79290)</td>
<td>1.4</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>2023-04-19T09:06:05.200Z</td>
<td>-5.9994</td>
<td>149.6062</td>
<td>55.674</td>
<td>6.3</td>
<td>POINT (149.60620 -5.99940)</td>
<td>1.8</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>2023-04-18T02:40:53.003Z</td>
<td>54.1600</td>
<td>159.9190</td>
<td>110.846</td>
<td>5.6</td>
<td>POINT (159.91900 54.16000)</td>
<td>1.1</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>2023-04-17T11:05:55.474Z</td>
<td>-4.8912</td>
<td>102.9538</td>
<td>58.386</td>
<td>5.5</td>
<td>POINT (102.95380 -4.89120)</td>
<td>1.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>2023-04-15T15:07:06.934Z</td>
<td>-4.8648</td>
<td>102.9744</td>
<td>56.688</td>
<td>5.5</td>
<td>POINT (102.97440 -4.86480)</td>
<td>1.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="plotte-avgrensa-område" class="level3">
<h3 class="anchored" data-anchor-id="plotte-avgrensa-område">Plotte avgrensa område</h3>
<p>No kan me plotta det avgrensa området. Bruker variablane med grensene for å tilpassa bakgrunnskartet.</p>
<div id="cell-44" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb25" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb25-1">base <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> world.plot(color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightgrey"</span>,</span>
<span id="cb25-2">                  edgecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"black"</span>, </span>
<span id="cb25-3">                  figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>),</span>
<span id="cb25-4">                 )</span>
<span id="cb25-5"></span>
<span id="cb25-6">base.set_ylim([lat_min, lat_maks])</span>
<span id="cb25-7">base.set_xlim([long_min, long_maks])</span>
<span id="cb25-8"></span>
<span id="cb25-9">område_skjelv.plot(ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base, </span>
<span id="cb25-10">                   color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>,</span>
<span id="cb25-11">                   markersize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span></span>
<span id="cb25-12">                  )</span>
<span id="cb25-13"></span>
<span id="cb25-14">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/index_files/figure-html/cell-21-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>På denne figuren ser me at det er nokre område der skjelva dekker breiare linjer enn ellers. Prøver å få fram kor djupe dei ulike skjelva er. Me deler inn datamaterialet i grunne, middels og djupe skjelv, med 30 km og 300 km som grenser mellom dei tre kategoriane.</p>
<div id="cell-46" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb26-1">område_djup <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> område_skjelv[(område_skjelv.depth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)]</span>
<span id="cb26-2">område_middels <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> område_skjelv[(område_skjelv.depth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span>
<span id="cb26-3">                               <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&amp;</span> (område_skjelv.depth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)]</span>
<span id="cb26-4">område_grunn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> område_skjelv[(område_skjelv.depth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>)]</span></code></pre></div>
</div>
<p>Desse nye <code>gdf</code>-ane kan me plotta på oversiktskart over regionen:</p>
<div id="cell-48" class="cell" data-execution_count="67">
<div class="sourceCode cell-code" id="cb27" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb27-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># bakgrunnskart</span></span>
<span id="cb27-2">base <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> world.plot(color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"linen"</span>,</span>
<span id="cb27-3">                  edgecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dimgray"</span>, </span>
<span id="cb27-4">                  figsize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>),</span>
<span id="cb27-5">                 )</span>
<span id="cb27-6"></span>
<span id="cb27-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># avgrensing (til området)</span></span>
<span id="cb27-8">base.set_ylim([lat_min, lat_maks])</span>
<span id="cb27-9">base.set_xlim([long_min, long_maks])</span>
<span id="cb27-10"></span>
<span id="cb27-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plotte skjelva</span></span>
<span id="cb27-12">område_djup.plot(ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dodgerblue"</span>, markersize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb27-13">område_middels.plot(ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"gold"</span>, markersize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb27-14">område_grunn.plot(ax <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> base, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span>, markersize<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb27-15"></span>
<span id="cb27-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pynt</span></span>
<span id="cb27-17">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">Jordskjelv vest i Stillehavet</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">22</span>)</span>
<span id="cb27-18">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Lengdegrad"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb27-19">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Breiddegrad"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb27-20">plt.legend([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"djupe ($d &gt; 300 km$)"</span>, </span>
<span id="cb27-21">           <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"middels ($30 km &lt; d \leq 300 km$)"</span>,</span>
<span id="cb27-22">           <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"grunne ($d \leq 30 km$)"</span></span>
<span id="cb27-23">           ])</span>
<span id="cb27-24">plt.savefig(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"jordskjelv_stillehavet_djupne.png"</span>, dpi<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">200</span>, bbox_inches<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"tight"</span>)</span>
<span id="cb27-25">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230425_jordskjelv/index_files/figure-html/cell-23-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Legg merke til <img src="https://latex.codecogs.com/png.latex?%5CLaTeX">-formateringa <code>middels ($30 km &lt; d \leq 300 km$</code> i teiknforklaringa.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tips
</div>
</div>
<div class="callout-body-container callout-body">
<p>Figurar som dei me har laga her, i sjølvvalde område, er supert utgangspunkt for vurdering (videopresentasjon, fagsamtale e.l.). Då kan elevane forklara kva dei ulike figurane viser, <code>kvifor</code> dei ser ut som dei gjer, og vidare gjera greie for aktuelle fagomgrep og prosessar knytt til dette.</p>
<ul>
<li>Kva mønster ser du i styrken på skjelva? Kva kan vera årsaken til det?</li>
<li>Kva mønster ser du i djupna på skjelva? Kva fortel det oss? Er det samanhengar mellom dei to figurane?</li>
</ul>
</div>
</div>


</section>
</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>modellering</category>
  <category>programmering</category>
  <category>tips</category>
  <category>geofag</category>
  <guid>https://lektorodd.github.io/posts/230425_jordskjelv/</guid>
  <pubDate>Mon, 24 Apr 2023 22:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230425_jordskjelv/skjelv.png" medium="image" type="image/png" height="82" width="144"/>
</item>
<item>
  <title>Samansett simulering i S2</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230303_simulering2/</link>
  <description><![CDATA[ 





<section id="simulering-som-verktøy" class="level1">
<h1>Simulering som verktøy <span class="emoji" data-emoji="muscle">💪</span></h1>
<p>Ein del problemstillingar kan vera ganske vanskelege å løysa ved rekning. Simulering kan hjelpa til å gjera denne type oppgåver <strong>mykje</strong> lettare å løysa. I dag ser me på ei oppgåve henta frå eksempelsettet til skriftleg eksamen etter ny læreplan i S2.</p>
<p>Ta gjerne ein kikk på <a href="../../posts/230209_simulering1/index.html">dette innlegget</a> om du treng oppfrisking i grunnleggande simulering med NumPy. Ellers er dokumentasjonen til <a href="https://numpy.org/doc/stable/reference/random/generator.html#numpy.random.default_rng">NumPy</a> ein fin stad å vera…</p>
<section id="oppgåva" class="level2">
<h2 class="anchored" data-anchor-id="oppgåva">Oppgåva</h2>
<blockquote class="blockquote">
<p>På ein skule er det 323 jenter og 301 gutar. La <img src="https://latex.codecogs.com/png.latex?X"> vera høgda til ei tilfeldig vald jente og <img src="https://latex.codecogs.com/png.latex?Y"> vera høgda til ein tilfeldig vald gut. Me går ut frå at <img src="https://latex.codecogs.com/png.latex?X"> og <img src="https://latex.codecogs.com/png.latex?Y"> er normalfordelt med <img src="https://latex.codecogs.com/png.latex?%5Cmu_x=168%20cm">, <img src="https://latex.codecogs.com/png.latex?%5Cmu_y=180%20cm">, <img src="https://latex.codecogs.com/png.latex?%5Csigma_x%20=%206%20cm"> og <img src="https://latex.codecogs.com/png.latex?%5Csigma_y%20=%208%20cm">. <br> <br> Lag eit program som du kan bruka til å simulera sannsynet for at ein tilfeldig vald elev er høgare enn 175 cm. Bestem dette sannsynet. <br> <br> <em>(<a href="https://sokeresultat.udir.no/eksamensoppgaver.html">UDIR</a> - Eksempelsett eksamen S2-V23 oppgåve 6, del 2)</em></p>
</blockquote>
<p><span class="emoji" data-emoji="monocle_face">🧐</span> Me må altså både bestemma om det er gut eller jente me har trekt i tillegg til å finna høgda på eleven. Krevande for hand/analytisk men ikkje så aller verst å finna ut av ved simulering!</p>
</section>
</section>
<section id="ulike-framgangsmåtar" class="level1">
<h1><span class="emoji" data-emoji="twisted_rightwards_arrows">🔀</span> Ulike framgangsmåtar</h1>
<p>Ser på tre ulike framgangsmåtar her <br> <span class="emoji" data-emoji="one">1️⃣</span> “rett fram” med løkker (treg måte <span class="emoji" data-emoji="turtle">🐢</span>) <br> <span class="emoji" data-emoji="two">2️⃣</span> fancy versjon av <span class="emoji" data-emoji="one">1️⃣</span> (men enno tregare <span class="emoji" data-emoji="snail">🐌</span>)<br> <span class="emoji" data-emoji="three">3️⃣</span> ingen løkker, kun arrays <span class="emoji" data-emoji="crown">👑</span> (rask måte <span class="emoji" data-emoji="zap">⚡</span>)</p>
<p><span class="emoji" data-emoji="bulb">💡</span> Om du er fan av eleganse og fart kan du hoppa rett til <span class="emoji" data-emoji="three">3️⃣</span></p>
<section id="løkker" class="level2">
<h2 class="anchored" data-anchor-id="løkker"><span class="emoji" data-emoji="one">1️⃣</span> Løkker</h2>
<p>Tanken her er å trekka ein elev <code>N</code> gongar. Trekk eit tal mellom 0 og 323+301, og seier at dei 323 første (fom. 0 tom. 322) er jenter, og dei siste (resten) er gutar. Simulerer høgda til kvar elev etter det. Tel til slutt opp kor mange som er over 175 cm.</p>
<div id="cell-4" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tal simuleringar</span></span>
<span id="cb1-5">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000000</span></span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># N elevar (tal mellom 0 og 323+301)</span></span>
<span id="cb1-8">elevar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">323</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">301</span>), size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tom liste til høgdene</span></span>
<span id="cb1-11">høgdar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb1-12"></span>
<span id="cb1-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Finn høgda til kvar elev</span></span>
<span id="cb1-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> elev <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> elevar:</span>
<span id="cb1-15">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> elev<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&lt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">323</span>: <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 0 til 322 er jenter</span></span>
<span id="cb1-16">        høgdar.append(rng.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">168</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>))</span>
<span id="cb1-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>: <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 323 til 323+301 er gutar</span></span>
<span id="cb1-18">        høgdar.append(rng.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>))</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp elevar høgare enn 175 cm</span></span>
<span id="cb1-21">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(np.array(høgdar)<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">175</span>)</span>
<span id="cb1-22">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb1-23"></span>
<span id="cb1-24"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Sannsynet for at ein tilfeldig elev er høgare enn 175 cm er </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sannsynet for at ein tilfeldig elev er høgare enn 175 cm er 0.4172</code></pre>
</div>
</div>
<p><span class="emoji" data-emoji="hourglass_flowing_sand">⏳</span> Her brukte maskina mi ca. 17 sek. på 10 000 000 simuleringar.</p>
</section>
<section id="funksjonar" class="level2">
<h2 class="anchored" data-anchor-id="funksjonar"><span class="emoji" data-emoji="two">2️⃣</span> funksjonar…</h2>
<p>Her gjer me <span class="emoji" data-emoji="one">1️⃣</span> litt meir fancy. Mykje lik tankegang.</p>
<div id="cell-7" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb3-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tal simuleringar</span></span>
<span id="cb3-5">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000000</span></span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn sannsyn jente og sannsyn gutt</span></span>
<span id="cb3-8">p <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.array([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">323</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">301</span>]) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">323</span><span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">301</span>)</span>
<span id="cb3-9"></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># lagar funksjon som trekk ein elev</span></span>
<span id="cb3-11"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> trekk_elev(p):</span>
<span id="cb3-12">    høgde <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-13">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># trekk kjønn:</span></span>
<span id="cb3-14">    kjønn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.choice([<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'j'</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'g'</span>], p<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>p)</span>
<span id="cb3-15">    </span>
<span id="cb3-16">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># trekk høgde (ut frå trekt kjønn)</span></span>
<span id="cb3-17">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> kjønn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'j'</span>:</span>
<span id="cb3-18">        høgde <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">168</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-19">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span>: </span>
<span id="cb3-20">        høgde <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb3-21">    </span>
<span id="cb3-22">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> høgde[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>]</span>
<span id="cb3-23"></span>
<span id="cb3-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp talet elevar som er over 175 cm</span></span>
<span id="cb3-25">gunstig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb3-26"></span>
<span id="cb3-27"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(N):</span>
<span id="cb3-28">    h <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> trekk_elev(p)</span>
<span id="cb3-29">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> h<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">175</span>:</span>
<span id="cb3-30">        gunstig <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb3-31"></span>
<span id="cb3-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn og skriv ut relativ frekvens</span></span>
<span id="cb3-33">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstig<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>N</span>
<span id="cb3-34"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Sannsynet for at ein tilfeldig elev er høgare enn 175 cm er </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sannsynet for at ein tilfeldig elev er høgare enn 175 cm er 0.4169</code></pre>
</div>
</div>
<p><span class="emoji" data-emoji="hourglass_flowing_sand">⏳</span> Her brukte maskina mi ca. 5 min. (!!!) på 10 000 000 simuleringar.</p>
</section>
<section id="alt-i-arrays" class="level2">
<h2 class="anchored" data-anchor-id="alt-i-arrays"><span class="emoji" data-emoji="three">3️⃣</span> Alt i arrays <span class="emoji" data-emoji="rocket">🚀</span></h2>
<p>For å gjera programmet effektivt, raskt og lett leseleg droppar eg løkker og funksjonar.</p>
<div id="cell-10" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb5-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb5-3"></span>
<span id="cb5-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall jenter, gutar og elevar på skulen</span></span>
<span id="cb5-5">j <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">323</span></span>
<span id="cb5-6">g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">301</span></span>
<span id="cb5-7">n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> j <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> g</span>
<span id="cb5-8"></span>
<span id="cb5-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tal simuleringar</span></span>
<span id="cb5-10">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000000</span></span>
<span id="cb5-11"></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn antall gutar (0) og jenter (1)</span></span>
<span id="cb5-13">kjønn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.choice([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>], size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N, p<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[g<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>n, j<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>n])</span>
<span id="cb5-14">jenter <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(kjønn)</span>
<span id="cb5-15">gutar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> jenter</span>
<span id="cb5-16"></span>
<span id="cb5-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn høgder på jenter og gutar for seg</span></span>
<span id="cb5-18">h_jenter <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">168</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>jenter)</span>
<span id="cb5-19">h_gutar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.normal(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">180</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>gutar)</span>
<span id="cb5-20"></span>
<span id="cb5-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># høgder på alle dei trekte elevane</span></span>
<span id="cb5-22">h_trekte <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.append(h_jenter, h_gutar)</span>
<span id="cb5-23"></span>
<span id="cb5-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># reknar ut sannsynet</span></span>
<span id="cb5-25">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(h_trekte <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">175</span>)</span>
<span id="cb5-26">sannsyn <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb5-27"></span>
<span id="cb5-28"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Sannsynet for at ein tilfeldig elev er høgare enn 175 cm er </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>sannsyn<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Sannsynet for at ein tilfeldig elev er høgare enn 175 cm er 0.4168</code></pre>
</div>
</div>
<p><span class="emoji" data-emoji="zap">⚡</span> 3,4 sek. på 10 000 000 simuleringar! <span class="emoji" data-emoji="sunglasses">😎</span></p>
</section>
</section>
<section id="oppsummert" class="level1">
<h1>Oppsummert</h1>
<p>Dette var eit lite innblikk i ulike måtar ei oppgåve som dette kan løysast på ved hjelp av simulering. Ville nok valgt den elegante og raske versjonen (<span class="emoji" data-emoji="three">3️⃣</span>) sjølv.</p>
<p>Gje gjerne eit pip om du lurer på noko <span class="emoji" data-emoji="arrow_down">⬇️</span> Plutseleg attende med nye innlegg <span class="emoji" data-emoji="v">✌️</span></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>programmering</category>
  <category>s-matte</category>
  <category>simulering</category>
  <category>eksamensoppgåve</category>
  <category>tips</category>
  <guid>https://lektorodd.github.io/posts/230303_simulering2/</guid>
  <pubDate>Thu, 02 Mar 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230303_simulering2/kuleramme.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Grunnleggjande simulering i NumPy</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230209_simulering1/</link>
  <description><![CDATA[ 





<section id="simulering-i-numpy" class="level1">
<h1><span class="emoji" data-emoji="computer">💻</span> Simulering i NumPy</h1>
<p>Simulering er ein viktig del av læreplanen i matematikk for samfunnsfag (S1 + S2) i LK20. Mange lærebøker er opptatt av løkker i simuleringa si. Det tar tid å køyra, kan vera meir tungt for elevane å forstå og kan by på meir feilmeldingar mtp. syntaks. Her kjem eit (kanskje av fleire) innlegg med tips til simulering med <a href="https://numpy.org/">NumPy</a>.</p>
<section id="random-generator" class="level2">
<h2 class="anchored" data-anchor-id="random-generator">Random generator</h2>
<p>For å simulera lagar me ein <em>random generator</em>. Denne kallar me for <code>rng</code> (<em>random number generator</em>). Me kan tilpassa <code>default_rng()</code> med å gje han ulike argument (feks. <code>seed</code> for å få reproduserbare tal) men i praksis i S1 og S2 er det ikkje noko me treng å tenka på.</p>
<div id="cell-3" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span></code></pre></div>
</div>
<p>Denne generatoren kan me bruka til mange ulike simuleringar. Om me vil kasta ein terning ein gong kan me trekka eit heiltal. Det gjer me med funksjonen <code>integers(low, high)</code> som ligg i <code>rng</code>-en vår.</p>
<div id="cell-5" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1">terning <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>)</span>
<span id="cb2-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(terning)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pass på
</div>
</div>
<div class="callout-body-container callout-body">
<p>Her vil <code>terning = rng.integers(1, 7)</code> gje oss</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7Bterning%7D%20%5Cin%20%5C%7B1,%202,%203,%204,%205,%206%5C%7D"></p>
<p>Med andre ord <img src="https://latex.codecogs.com/png.latex?1%20%5Cleq%20%5Ctext%7Bterning%7D%20%3C%207"></p>
</div>
</div>
<p>Om me vil kasta fleire terningar kan me i tillegg gje inn <code>size</code> som argument til <code>rng.integers</code></p>
<div id="cell-8" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1">terningar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)</span>
<span id="cb4-2"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(terningar)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 1 4 2 5 1 6 5 3 5]</code></pre>
</div>
</div>
<p>Vidare kan me rekna med resultata. Desse er lagra i ein <code>array</code> (ein variabeltype som minnar om lister).</p>
<p>Me kan t.d. sjekka kor mange av dei 10 terningane me kasta som vart seksarar. Først kan me sjekka kva verdiar som er 6:</p>
<div id="cell-10" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1">terningar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>array([False, False, False, False, False, False,  True, False, False,
       False])</code></pre>
</div>
</div>
<p>Dette kan me bruka til å rekna med. Sidan <code>False</code> vert tolka som 0 og <code>True</code> vert tolka som 1 kan me finna summen av arrayen med sanningsvariablane:</p>
<div id="cell-12" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(terningar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="døme" class="level2">
<h2 class="anchored" data-anchor-id="døme">Døme <span class="emoji" data-emoji="game_die">🎲</span></h2>
<p>Me trillar terning.</p>
<p><img src="https://latex.codecogs.com/png.latex?A">: terningen viser 5 eller 6.</p>
<p>Finn <img src="https://latex.codecogs.com/png.latex?P(A)"> ved hjelp av simulering.</p>
<div id="cell-14" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb10-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tal simuleringar</span></span>
<span id="cb10-5">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10000000</span></span>
<span id="cb10-6"></span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># triller terning N gongar</span></span>
<span id="cb10-8">terningar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, N)</span>
<span id="cb10-9"></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn antall femmarar og seksarar</span></span>
<span id="cb10-11">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(terningar <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb10-12"></span>
<span id="cb10-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn og skriv ut relativ frekvens</span></span>
<span id="cb10-14">rel_frek <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb10-15"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(A) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(A) = 0.3332</code></pre>
</div>
</div>
<p>Ut frå 10 000 000 simuleringar ser me at <img src="https://latex.codecogs.com/png.latex?P(A)=0,3333">. Dvs. det er <img src="https://latex.codecogs.com/png.latex?33,33%5C%25"> sannsynleg å trilla 5 eller 6 på terningen.</p>
<p>Dømet over er eit problem som ikkje er vanskeleg å løysa analytisk, og dermed ikkje veldig spennande å bruka simulering på. Men om problema vert vanskelege å rekna på er dei ofte ikkje så vanskelege å simulera. Eit litt meir avansert problem (som er lett å simulera) finn me i S1-eksamen frå våren 2022:</p>
<blockquote class="blockquote">
<p>I eit spel kastar du tre terningar. Du multipliserer saman augetalet på terningane. Dersom dette produktet er større enn 100, vinn du. Bestem sannsynet for å vinne ved å køyre simuleringar. Hugs å vise korleis du kjem fram til svaret. <a href="https://sokeresultat.udir.no/eksamensoppgaver.html?query=s1">UDIR (2022) - Eksamen S1-V22</a></p>
</blockquote>
<p>For å svare på denne oppgåva treng me litt meir kjennskap til korleis me kan jobba med arrays. Arrays er ein form for lister eller vektorar. Me kan utføra ulike rekneoperasjonar med dei. Me kan t.d. legga dei saman og multiplisera dei:</p>
<div id="cell-18" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1">a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.array([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>])</span>
<span id="cb12-2">b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.array([<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">6</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>b)</span>
<span id="cb12-5"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>b)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7 7 7 7 7 7]
[ 6 10 12 12 10  6]</code></pre>
</div>
</div>
<p>Då har me alt me treng for å løysa eksamensoppgåva:</p>
<div id="cell-20" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb14-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb14-3"></span>
<span id="cb14-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall simuleringar</span></span>
<span id="cb14-5">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb14-6"></span>
<span id="cb14-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># triller 3 terningar N gongar</span></span>
<span id="cb14-8">t1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, N)</span>
<span id="cb14-9">t2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, N)</span>
<span id="cb14-10">t3 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.integers(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>, N)</span>
<span id="cb14-11"></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn produktet</span></span>
<span id="cb14-13">prod <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> t1<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> t2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> t3</span>
<span id="cb14-14"></span>
<span id="cb14-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp kor mange av produkta som er over 100</span></span>
<span id="cb14-16">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(prod <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span>
<span id="cb14-17"></span>
<span id="cb14-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn og skriv ut relativ frekvens</span></span>
<span id="cb14-19">rel_frek <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb14-20"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(produkt over 100) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(produkt over 100) = 0.0928</code></pre>
</div>
</div>
<p>Det er med andre ord ca. <img src="https://latex.codecogs.com/png.latex?9,34%5C%25"> sannsynleg å vinna spelet.</p>
</section>
</section>
<section id="binomisk-sannsynsmodell" class="level1">
<h1>Binomisk sannsynsmodell</h1>
<p>I <code>rng</code> har me òg mogleiken for simulering av binomiske fordelingar.</p>
<p><code>rng.binomial(n, p)</code> der <code>n</code> er talet på delforsøk og <code>p</code> er sannsynet for suksess i kvart delforsøk.</p>
<section id="døme-på-bruk" class="level2">
<h2 class="anchored" data-anchor-id="døme-på-bruk">Døme på bruk</h2>
<p>Me plantar 150 frø. Sannsynet for at eit frø spirer er 85%.</p>
<p>Kva er sannsynet for at minst 130 frø spirer?</p>
<p><img src="https://latex.codecogs.com/png.latex?X">: antall frø som spirer.</p>
<div id="cell-23" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb16-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb16-3"></span>
<span id="cb16-4">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span>     <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall simuleringar</span></span>
<span id="cb16-5"></span>
<span id="cb16-6">n <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">150</span>         <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall delforsøk/frø</span></span>
<span id="cb16-7">p <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.85</span>        <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># sannsynet for at eitt frø spirer</span></span>
<span id="cb16-8"></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ser kor mange av frøa som spirer kvar simulering</span></span>
<span id="cb16-10">spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.binomial(n, p, N)</span>
<span id="cb16-11"></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tell opp dei simuleringane som gjev 130+ frø som spirer</span></span>
<span id="cb16-13">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(spirer <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">130</span>)</span>
<span id="cb16-14"></span>
<span id="cb16-15">rel_frek <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb16-16"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(X &gt;= 130) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(X &gt;= 130) = 0.3311</code></pre>
</div>
</div>
<p>Ser at <img src="https://latex.codecogs.com/png.latex?P(X%5Cgeq%20130)%20=%200,3321">.</p>
</section>
</section>
<section id="hypergeometrisk-sannsynsmodell" class="level1">
<h1>Hypergeometrisk sannsynsmodell</h1>
<p>På same måte kan me simulera hypergeometrisk fordeling.</p>
<p><code>rng.hypergeometric(ngood, nbad, nsample)</code> der <code>ngood</code> og <code>nbad</code> er dei to delane av populasjonen vår og <code>nsample</code> er storleiken på utvalet me trekk.</p>
<section id="døme-på-bruk-1" class="level2">
<h2 class="anchored" data-anchor-id="døme-på-bruk-1">Døme på bruk</h2>
<p>Det ligg 4 daim og 7 banantwist i ei skål. Du trekk 3 bitar. Kva er sannsynet for at akkurat to av desse er daim?</p>
<div id="cell-26" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb18-2">rng <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.random.default_rng()</span>
<span id="cb18-3"></span>
<span id="cb18-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall simuleringar</span></span>
<span id="cb18-5">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1000000</span></span>
<span id="cb18-6"></span>
<span id="cb18-7">ngood <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>      <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># daim i populasjonen</span></span>
<span id="cb18-8">nbad <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>       <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># banan i populasjonen</span></span>
<span id="cb18-9">nsample <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># antall bitar me trekk</span></span>
<span id="cb18-10"></span>
<span id="cb18-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># simulerer</span></span>
<span id="cb18-12">twist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> rng.hypergeometric(ngood, nbad, nsample, size<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>N)</span>
<span id="cb18-13"></span>
<span id="cb18-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tel opp kor mange gonagar me fekk 2 daim</span></span>
<span id="cb18-15">gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sum</span>(twist <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)</span>
<span id="cb18-16"></span>
<span id="cb18-17">rel_frek <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gunstige <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> N</span>
<span id="cb18-18"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"P(X=2) = </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:.4f}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(X=2) = 0.2539</code></pre>
</div>
</div>
<p>Det er <img src="https://latex.codecogs.com/png.latex?25,5%5C%25"> sannsynleg at det er akkurat to daimtwist.</p>
</section>
</section>
<section id="oppsummert" class="level1">
<h1>Oppsummert</h1>
<p>Simulering med <code>numpy</code> er altså fleksibelt og raskt med mindre komplisert syntaks enn store løkker.</p>
<p>I tillegg er det mange andre kjekke funksjonar som mellom anna <code>rng.choice()</code> og <code>rng.normal()</code> som kan vera kjekke. Meir om dei ein annan dag <span class="emoji" data-emoji="smile">😄</span></p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>programmering</category>
  <category>s-matte</category>
  <category>simulering</category>
  <category>tips</category>
  <guid>https://lektorodd.github.io/posts/230209_simulering1/</guid>
  <pubDate>Wed, 08 Feb 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230209_simulering1/terning.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Hydrologiprogrammering</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230202_hydrologimodellering/</link>
  <description><![CDATA[ 





<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/island.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:90.0%"></p>
<figcaption>📷 Dettifoss, Island</figcaption>
</figure>
</div>
<section id="hydrologiprosjekt-i-geofag-1" class="level1">
<h1>Hydrologiprosjekt i Geofag 1</h1>
<p>Her kjem eit døme på korleis ein kan bruka og behandla nokre av dei store hydrologi-datamengdene me har tilgjengeleg i Noreg. Datamaterialet er samla inn av <a href="https://www.nve.no/">NVE</a> og henta frå <a href="https://sildre.nve.no/">Sildre</a>.</p>
<p>📌 I det følgjande dømet nyttar eg vassføringsdata frå <a href="https://www.norgeskart.no/#!?project=norgeskart&amp;layers=1002&amp;zoom=11&amp;lat=6674836.62&amp;lon=34802.80&amp;sok=Reinsnosvatn&amp;markerLat=6675824.352100712&amp;markerLon=36873.4684766499&amp;p=searchOptionsPanel">Reinsnosvatn</a></p>
<blockquote class="blockquote">
<p>Målestasjonen ligger i Ullensvang i Vestland og er aktiv. Den har vært i drift siden juni 1917 og leverer i dag 3 forskjellige målinger. (sildre.nve.no)</p>
</blockquote>
<p>Prosjektet tek altså utgangspunkt i daglege målingar frå 1917!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tips til nedlasting
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>1️⃣ Finn deg ei elv på <a href="https://sildre.nve.no">sildre.nve.no</a> <br> 2️⃣ Trykk på <code>last ned som csv</code> <br> 3️⃣ Kryss av på aktuelle instillingar <br> 4️⃣ Last ned</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/laste_ned.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>⬇️ Laste ned data</figcaption>
</figure>
</div>
</div>
</div>
</div>
<section id="importere-bibliotek" class="level2">
<h2 class="anchored" data-anchor-id="importere-bibliotek">Importere bibliotek</h2>
<p>Vassføringsdataa er lasta ned i csv-format. Me bruker <code>pandas</code> for å jobba med dette effektivt. I tillegg vert det litt plotting og matematikk, så me treng <code>pyplot</code> og <code>numpy</code> i tillegg.</p>
<div id="9bdf8874" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> pandas <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span></code></pre></div>
</div>
</section>
<section id="opprette-dataramme" class="level2">
<h2 class="anchored" data-anchor-id="opprette-dataramme">Opprette dataramme</h2>
<p>CSV-fila med vassføringsdata les me inn i ei <code>dataramme</code> (<em>dataframe</em>). Viss ein tar ein kikk på fila ser ein at det er brukt semikolon for å skilja verdiane, det er to rader før verdiane kjem. Me lagar litt forenkla namn på kolonnene, og les inn data. I tillegg er det nytta komma (og ikkje punktum) som desimalteikn.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/df.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>🔍 Dei første linjene</figcaption>
</figure>
</div>
<div id="4f11450e" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.read_csv(</span>
<span id="cb2-2">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"vassforing_reinsnos_dogn.csv"</span>, </span>
<span id="cb2-3">    sep <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">";"</span>, </span>
<span id="cb2-4">    skiprows <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, </span>
<span id="cb2-5">    names <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dato"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korrigert"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Kontrollert"</span>], </span>
<span id="cb2-6">    parse_dates <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, </span>
<span id="cb2-7">    decimal<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">","</span></span>
<span id="cb2-8">)</span>
<span id="cb2-9"></span>
<span id="cb2-10">df.index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.to_datetime(df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'dato'</span>]) </span>
<span id="cb2-11">df.index <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.to_datetime(df.index.date)</span>
<span id="cb2-12">df <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.drop(columns <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dato"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Korrigert"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Kontrollert"</span>])</span></code></pre></div>
</div>
<p>Sjekkar dei nyaste fem målingane i tabellen for å sjå at alt ser ok ut.</p>
<div id="fea38cc9" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1">df.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vassføring</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-24</td>
<td>1.299365</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-25</td>
<td>1.593457</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-26</td>
<td>2.128418</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-27</td>
<td>2.322153</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-28</td>
<td>2.324195</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>I tillegg kan me prøva å plotta verdiane i dataramma. <br> <em>Har med <code>;</code> for å unngå å visa meldinga <code>&lt;AxesSubplot: &gt;</code></em></p>
<div id="18381b06" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1">df.plot()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-5-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Me ser her at dette ikkje er spesielt nyttig eller informativt, men grafen viser oss at det på 1920-talet er eit par år utan målingar. Korleis dette kan fiksast kjem me attende til litt seinare.</p>
</section>
<section id="middelflom" class="level2">
<h2 class="anchored" data-anchor-id="middelflom">Middelflom</h2>
<p>Middelflommen til ei elv er rekna ut frå den største døgnvassføringa per år over eit lengre tidsrom. Frå <a href="https://varsom.no/flom-og-jordskred/ordliste/ordliste-for-flom/">NVE/varsom.no</a> finn me denne definisjonen:</p>
<blockquote class="blockquote">
<p>En middelflom (normal flom) defineres som gjennomsnittet av høyeste vannføring hvert år i en lang årrekke.</p>
</blockquote>
<p>For å rekna ut dette må me altså først finna den maksimale vassføringa per år. Bruker <code>groupby</code> i Pandas for å finne dette.</p>
<div id="494bf395" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb5-1">årleg_vf_maks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.groupby(by<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[df.index.year]).<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>()</span>
<span id="cb5-2">årleg_vf_maks.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vassføring</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1917</td>
<td>26.98031</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1918</td>
<td>50.93218</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1919</td>
<td>37.72713</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1920</td>
<td>63.26006</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1921</td>
<td>58.04514</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Plottar den nye dataramma <code>årleg_maks</code> som kun har ei måling per år:</p>
<div id="28c9ea65" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb6-1">årleg_vf_maks.plot()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-7-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p>På grunn av “holet” i målingane tar me berre med data frå 1930 eller seinare med oss vidare. I tillegg er det vinter (og snø/is) for dataa me har for 2023, så me avgrensar til 2022.</p>
<div id="3401c70f" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb7-1">årleg_vf_maks <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> årleg_vf_maks.loc[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1930</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>]</span>
<span id="cb7-2">årleg_vf_maks.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vassføring</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1930</td>
<td>43.82251</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1931</td>
<td>46.29647</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1932</td>
<td>52.52979</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1933</td>
<td>68.09634</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934</td>
<td>48.32775</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Me vil finna gjennomsnittleg største årlege vassføring over fleire år. Vel her å sjå på eit gjennomsnitt på 30 år om gongen. Bruker funksjonen <code>rolling</code> og <code>mean</code> i kombinasjon. <code>rolling</code> gjer at me kan gå gjennom dataramma og sjå på dei 30 tidlegare verdiane til kvar rad i tabellen og finna gjennomsnittet (<code>mean</code>) i dette rullande vinduet.</p>
<div id="777a1455" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb8-1">maksvf_og_middelflom <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> årleg_vf_maks.copy()</span>
<span id="cb8-2">maksvf_og_middelflom[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Middelflom"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> årleg_vf_maks.rolling(window <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>).mean()</span></code></pre></div>
</div>
<p>Ser på dei første 5 radene</p>
<div id="02efc07e" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb9-1">maksvf_og_middelflom.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vassføring</th>
<th data-quarto-table-cell-role="th">Middelflom</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1930</td>
<td>43.82251</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1931</td>
<td>46.29647</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1932</td>
<td>52.52979</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1933</td>
<td>68.09634</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1934</td>
<td>48.32775</td>
<td>NaN</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Ser at dei fem første radene i den nye dataramma er <code>NaN</code> (not a number). Dette skjer fordi ein ikkje kan ta gjennomsnitt av dei siste 30 åra før det har gått 30 år… Sjekkar dei nyaste radene i staden:</p>
<div id="3d0a5e0f" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb10-1">maksvf_og_middelflom.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vassføring</th>
<th data-quarto-table-cell-role="th">Middelflom</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2018</td>
<td>73.75180</td>
<td>60.571163</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2019</td>
<td>47.75206</td>
<td>59.893282</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2020</td>
<td>78.19958</td>
<td>60.860965</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2021</td>
<td>46.81937</td>
<td>60.837067</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2022</td>
<td>73.51824</td>
<td>60.972971</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Plottar dataramma og ser korleis dei nye verdiane ser ut:</p>
<div id="bda3e51c" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb11-1">maksvf_og_middelflom.plot()<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-12-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="modellering-av-middelflom" class="level2">
<h2 class="anchored" data-anchor-id="modellering-av-middelflom">Modellering av middelflom</h2>
<p>Ser at trenden er oppadgåande og relativt lineær. Ønsker å laga ein lineær modell. Bruker <code>polyfit</code> frå <code>NumPy</code>.</p>
<div id="ac5d728f" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åra me har data på middelflom</span></span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># frå og med 1959 til men ikkje med 2023</span></span>
<span id="cb12-3">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1959</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>) </span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn koeffesientane til førstegradspolynomet</span></span>
<span id="cb12-6">a, b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.polyfit(x, maksvf_og_middelflom[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Middelflom"</span>].loc[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1959</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>], <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># definerer lineær funksjon</span></span>
<span id="cb12-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> f(x):</span>
<span id="cb12-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b</span>
<span id="cb12-11"></span>
<span id="cb12-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plottar dataramma</span></span>
<span id="cb12-13">maksvf_og_middelflom.plot(</span>
<span id="cb12-14">    figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>), </span>
<span id="cb12-15">    grid <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, </span>
<span id="cb12-16">    fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, </span>
<span id="cb12-17">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, </span>
<span id="cb12-18">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightsteelblue"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>]</span>
<span id="cb12-19">)</span>
<span id="cb12-20"></span>
<span id="cb12-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plottar modellen</span></span>
<span id="cb12-22">plt.plot(</span>
<span id="cb12-23">    x, f(x), </span>
<span id="cb12-24">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, </span>
<span id="cb12-25">    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Modell for middelflom"</span>, </span>
<span id="cb12-26">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span></span>
<span id="cb12-27">)</span>
<span id="cb12-28"></span>
<span id="cb12-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pynting av plot</span></span>
<span id="cb12-30">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring og middelflom</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>)</span>
<span id="cb12-31">plt.legend(fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb12-32">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring, kubikkmeter/s"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb12-33">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"År"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb12-34"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#plt.savefig("Reinsnos - årleg maksvassføring og middelflom.png", dpi = 300)</span></span>
<span id="cb12-35">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-13-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Ekstrapolasjon - modell for framtidig middelflom</strong></p>
<p>Me kan bruka trendlinja for middelflommen som modell for å seie noko om korleis utviklinga vil vera i åra framover (om utviklinga held fram som no):</p>
<div id="7aac9019" class="cell" data-execution_count="33">
<details class="code-fold">
<summary>Kode</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb13-1">maksvf_og_middelflom.plot(figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>), </span>
<span id="cb13-2">                grid <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, </span>
<span id="cb13-3">                fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, </span>
<span id="cb13-4">                linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, </span>
<span id="cb13-5">                color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightsteelblue"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>]</span>
<span id="cb13-6">               )</span>
<span id="cb13-7"></span>
<span id="cb13-8">plt.plot(x, f(x), </span>
<span id="cb13-9">         linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">1.5</span>, </span>
<span id="cb13-10">         label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Modell - middelflom"</span>, </span>
<span id="cb13-11">         color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"crimson"</span></span>
<span id="cb13-12">        )</span>
<span id="cb13-13"></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plottar forlenginga av den lineære modellen</span></span>
<span id="cb13-15">x2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2101</span>)</span>
<span id="cb13-16">plt.plot(x2, f(x2), <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">":"</span>, linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"crimson"</span>)</span>
<span id="cb13-17"></span>
<span id="cb13-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pynting av plot</span></span>
<span id="cb13-19">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring og middelflom - modell fram mot 2100 </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>)</span>
<span id="cb13-20">plt.legend(fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb13-21">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring, kubikkmeter/s"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb13-22">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"År"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb13-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#plt.savefig("Reinsnos - modellering av middelflom 2100.png", dpi = 300)</span></span>
<span id="cb13-24">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-14-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sjekkar-opp-mot-nve-sine-flom-data" class="level2">
<h2 class="anchored" data-anchor-id="sjekkar-opp-mot-nve-sine-flom-data">Sjekkar opp mot NVE sine flom-data</h2>
<p>Frå stasjonsssida til Reinsnosvatn kan me finna data om ulike typar flom.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/flomdata_nve.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
<figcaption>Flomdata frå <a href="https://sildre.nve.no/station/48.5.0?48.5.0_tab=2">NVE</a></figcaption>
</figure>
</div>
<p>Ser at verdien for 20-årsflom er 78,28 <img src="https://latex.codecogs.com/png.latex?m%5E3/s">. Plottar inn linja <img src="https://latex.codecogs.com/png.latex?y=78,28"> i samme figur som tidlegare. Bruker <code>plt.axhline()</code> for å teikna horisontal linje.</p>
<div id="13118de9" class="cell" data-execution_count="34">
<details class="code-fold">
<summary>Kode</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># åra me har data på middelflom</span></span>
<span id="cb14-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># frå og med 1959 til men ikkje med 2023</span></span>
<span id="cb14-3">x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.arange(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1959</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2023</span>) </span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># finn koeffesientane til førstegradspolynomet</span></span>
<span id="cb14-6">a, b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.polyfit(x, maksvf_og_middelflom[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Middelflom"</span>].loc[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1959</span>:<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2022</span>], <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb14-7"></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># definerer lineær funksjon</span></span>
<span id="cb14-9"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> f(x):</span>
<span id="cb14-10">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> a<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b</span>
<span id="cb14-11"></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plottar dataramma</span></span>
<span id="cb14-13">maksvf_og_middelflom.plot(</span>
<span id="cb14-14">    figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span>), </span>
<span id="cb14-15">    grid <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>, </span>
<span id="cb14-16">    fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, </span>
<span id="cb14-17">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, </span>
<span id="cb14-18">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"lightsteelblue"</span>, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"royalblue"</span>]</span>
<span id="cb14-19">)</span>
<span id="cb14-20"></span>
<span id="cb14-21"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plottar modellen</span></span>
<span id="cb14-22">plt.plot(</span>
<span id="cb14-23">    x, f(x), </span>
<span id="cb14-24">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, </span>
<span id="cb14-25">    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Modell for middelflom"</span>, </span>
<span id="cb14-26">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"red"</span></span>
<span id="cb14-27">)</span>
<span id="cb14-28"></span>
<span id="cb14-29"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># plottar 20-årsflom</span></span>
<span id="cb14-30">plt.axhline(</span>
<span id="cb14-31">        y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">78.28</span>,</span>
<span id="cb14-32">        color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"crimson"</span>, </span>
<span id="cb14-33">        linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, </span>
<span id="cb14-34">        linestyle <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">":"</span>, </span>
<span id="cb14-35">        label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"20-årsflom"</span></span>
<span id="cb14-36">)</span>
<span id="cb14-37"></span>
<span id="cb14-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pynting av plot</span></span>
<span id="cb14-39">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring og middelflom</span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>)</span>
<span id="cb14-40">plt.legend(fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb14-41">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring, kubikkmeter/s"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb14-42">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"År"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb14-43"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#plt.savefig("Reinsnos - årleg maksvassføring og middelflom.png", dpi = 300)</span></span>
<span id="cb14-44">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-15-output-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tips til oppgåver
</div>
</div>
<div class="callout-body-container callout-body">
<p>Plott linjer for dei ulike flom-typane. Kor godt stemmer observasjonane med desse tala? <br> Kva ligg i omgrepet 20-årsflom?</p>
</div>
</div>
</section>
</section>
<section id="hydrogram---vassføring-per-dag" class="level1">
<h1>Hydrogram - vassføring per dag</h1>
<p>Denne store tabellen vår med daglege data frå over 100 år kan me gjera mykje gøy med. Me kan t.d. sortera alle observasjonane til dag i året, og sjå korleis vassføringa <em>vanlegvis</em> er gjennom eit år. I koden under gjer me dette, og i tillegg fargelegg me området mellom 25 og 75-persenilen. På denne måten får me fargelagt dei 50% midterste målingane per dag. Det er òg greitt å visa medianen (som blir hydrogrammet) på figuren.</p>
<p>Startar med å sortera den opprinnelege <code>df</code> til <em>dag i året</em> (day of year - <code>doy</code>). Etterpå grupperer me materialet i ein ny tabell.</p>
<div id="16fca768" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb15-1">df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'doy'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.index.dayofyear</span>
<span id="cb15-2">df[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'år'</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> df.index.year</span>
<span id="cb15-3">df.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Vassføring</th>
<th data-quarto-table-cell-role="th">doy</th>
<th data-quarto-table-cell-role="th">år</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1917-06-15</td>
<td>19.06312</td>
<td>166</td>
<td>1917</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1917-06-16</td>
<td>16.46433</td>
<td>167</td>
<td>1917</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1917-06-17</td>
<td>16.46433</td>
<td>168</td>
<td>1917</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1917-06-18</td>
<td>18.67722</td>
<td>169</td>
<td>1917</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1917-06-19</td>
<td>21.97948</td>
<td>170</td>
<td>1917</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Lagar ein pivottabell med dag i året som rader og årstal som kolonner</p>
<div id="7ad1a61d" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb16-1">piv <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pd.pivot_table(df, index<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'doy'</span>],columns<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'år'</span>], values<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Vassføring'</span>])</span>
<span id="cb16-2">piv.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="21" data-quarto-table-cell-role="th" data-halign="left">Vassføring</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">år</th>
<th data-quarto-table-cell-role="th">1917</th>
<th data-quarto-table-cell-role="th">1918</th>
<th data-quarto-table-cell-role="th">1919</th>
<th data-quarto-table-cell-role="th">1920</th>
<th data-quarto-table-cell-role="th">1921</th>
<th data-quarto-table-cell-role="th">1922</th>
<th data-quarto-table-cell-role="th">1923</th>
<th data-quarto-table-cell-role="th">1924</th>
<th data-quarto-table-cell-role="th">1925</th>
<th data-quarto-table-cell-role="th">1929</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2014</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">doy</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>NaN</td>
<td>0.751369</td>
<td>0.520992</td>
<td>0.110245</td>
<td>0.520992</td>
<td>2.268141</td>
<td>0.858653</td>
<td>NaN</td>
<td>4.303123</td>
<td>NaN</td>
<td>...</td>
<td>4.858096</td>
<td>1.869427</td>
<td>4.191920</td>
<td>28.483190</td>
<td>4.161459</td>
<td>2.347107</td>
<td>12.096400</td>
<td>2.466642</td>
<td>4.124214</td>
<td>2.000038</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>NaN</td>
<td>0.751369</td>
<td>0.481094</td>
<td>0.095431</td>
<td>0.562897</td>
<td>2.268141</td>
<td>0.751369</td>
<td>NaN</td>
<td>4.003652</td>
<td>NaN</td>
<td>...</td>
<td>4.406689</td>
<td>3.295648</td>
<td>3.810454</td>
<td>19.011320</td>
<td>3.759124</td>
<td>2.669421</td>
<td>8.641389</td>
<td>2.288357</td>
<td>5.344579</td>
<td>1.913351</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>NaN</td>
<td>0.701046</td>
<td>0.443164</td>
<td>0.095431</td>
<td>0.606849</td>
<td>2.166990</td>
<td>0.803893</td>
<td>NaN</td>
<td>3.858951</td>
<td>NaN</td>
<td>...</td>
<td>3.952404</td>
<td>4.470398</td>
<td>3.068896</td>
<td>11.995200</td>
<td>3.438255</td>
<td>2.515568</td>
<td>8.580434</td>
<td>2.122319</td>
<td>6.083396</td>
<td>1.827513</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>NaN</td>
<td>0.701046</td>
<td>0.407161</td>
<td>0.095431</td>
<td>0.652886</td>
<td>1.973261</td>
<td>0.915689</td>
<td>NaN</td>
<td>3.717565</td>
<td>NaN</td>
<td>...</td>
<td>3.694488</td>
<td>4.407481</td>
<td>2.748646</td>
<td>8.526679</td>
<td>3.053644</td>
<td>2.336836</td>
<td>7.108252</td>
<td>1.954245</td>
<td>5.640584</td>
<td>1.779285</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>NaN</td>
<td>0.652886</td>
<td>0.373045</td>
<td>0.110245</td>
<td>0.803893</td>
<td>1.703600</td>
<td>0.915689</td>
<td>NaN</td>
<td>3.444615</td>
<td>NaN</td>
<td>...</td>
<td>3.422920</td>
<td>4.161712</td>
<td>2.613774</td>
<td>6.329734</td>
<td>2.739008</td>
<td>2.265773</td>
<td>5.907576</td>
<td>1.806864</td>
<td>4.668677</td>
<td>1.701279</td>
</tr>
</tbody>
</table>

<p>5 rows × 104 columns</p>
</div>
</div>
</div>
<section id="utrekningar" class="level2">
<h2 class="anchored" data-anchor-id="utrekningar">Utrekningar</h2>
<p>Finn ulike verdiar per dag i året over dei 104 åra.</p>
<div id="d64e1f24" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb17-1">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"min"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> piv.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>(axis <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb17-2">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"maks"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> piv.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>(axis <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb17-3">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"75%"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> piv.quantile(q <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.75</span>,axis <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb17-4">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> piv.median(axis <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb17-5">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"25%"</span>] <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> piv.quantile(q <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.25</span>,axis <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb17-6"></span>
<span id="cb17-7">piv.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th colspan="16" data-quarto-table-cell-role="th" data-halign="left">Vassføring</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">maks</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">median</th>
<th data-quarto-table-cell-role="th">25%</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">år</th>
<th data-quarto-table-cell-role="th">1917</th>
<th data-quarto-table-cell-role="th">1918</th>
<th data-quarto-table-cell-role="th">1919</th>
<th data-quarto-table-cell-role="th">1920</th>
<th data-quarto-table-cell-role="th">1921</th>
<th data-quarto-table-cell-role="th">1922</th>
<th data-quarto-table-cell-role="th">1923</th>
<th data-quarto-table-cell-role="th">1924</th>
<th data-quarto-table-cell-role="th">1925</th>
<th data-quarto-table-cell-role="th">1929</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
<tr class="header">
<th data-quarto-table-cell-role="th">doy</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1</td>
<td>NaN</td>
<td>0.751369</td>
<td>0.520992</td>
<td>0.110245</td>
<td>0.520992</td>
<td>2.268141</td>
<td>0.858653</td>
<td>NaN</td>
<td>4.303123</td>
<td>NaN</td>
<td>...</td>
<td>2.347107</td>
<td>12.096400</td>
<td>2.466642</td>
<td>4.124214</td>
<td>2.000038</td>
<td>0.110245</td>
<td>28.48319</td>
<td>2.589138</td>
<td>1.381706</td>
<td>0.701046</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2</td>
<td>NaN</td>
<td>0.751369</td>
<td>0.481094</td>
<td>0.095431</td>
<td>0.562897</td>
<td>2.268141</td>
<td>0.751369</td>
<td>NaN</td>
<td>4.003652</td>
<td>NaN</td>
<td>...</td>
<td>2.669421</td>
<td>8.641389</td>
<td>2.288357</td>
<td>5.344579</td>
<td>1.913351</td>
<td>0.095431</td>
<td>19.01132</td>
<td>2.548025</td>
<td>1.417153</td>
<td>0.652886</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>NaN</td>
<td>0.701046</td>
<td>0.443164</td>
<td>0.095431</td>
<td>0.606849</td>
<td>2.166990</td>
<td>0.803893</td>
<td>NaN</td>
<td>3.858951</td>
<td>NaN</td>
<td>...</td>
<td>2.515568</td>
<td>8.580434</td>
<td>2.122319</td>
<td>6.083396</td>
<td>1.827513</td>
<td>0.095431</td>
<td>11.99520</td>
<td>2.491543</td>
<td>1.381060</td>
<td>0.606849</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>NaN</td>
<td>0.701046</td>
<td>0.407161</td>
<td>0.095431</td>
<td>0.652886</td>
<td>1.973261</td>
<td>0.915689</td>
<td>NaN</td>
<td>3.717565</td>
<td>NaN</td>
<td>...</td>
<td>2.336836</td>
<td>7.108252</td>
<td>1.954245</td>
<td>5.640584</td>
<td>1.779285</td>
<td>0.095431</td>
<td>14.41007</td>
<td>2.421806</td>
<td>1.275205</td>
<td>0.652886</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">5</td>
<td>NaN</td>
<td>0.652886</td>
<td>0.373045</td>
<td>0.110245</td>
<td>0.803893</td>
<td>1.703600</td>
<td>0.915689</td>
<td>NaN</td>
<td>3.444615</td>
<td>NaN</td>
<td>...</td>
<td>2.265773</td>
<td>5.907576</td>
<td>1.806864</td>
<td>4.668677</td>
<td>1.701279</td>
<td>0.110245</td>
<td>18.95604</td>
<td>2.372195</td>
<td>1.207931</td>
<td>0.728653</td>
</tr>
</tbody>
</table>

<p>5 rows × 109 columns</p>
</div>
</div>
</div>
</section>
<section id="plottar" class="level2">
<h2 class="anchored" data-anchor-id="plottar">Plottar</h2>
<div id="9c03184a" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plottar minimumsverdiar</span></span>
<span id="cb18-2">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"min"</span>].plot(</span>
<span id="cb18-3">    figsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>),</span>
<span id="cb18-4">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"seagreen"</span>, </span>
<span id="cb18-5">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, </span>
<span id="cb18-6">    grid <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>, </span>
<span id="cb18-7">    fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>, </span>
<span id="cb18-8">    legend <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>,</span>
<span id="cb18-9">    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Minste verdi"</span></span>
<span id="cb18-10">)</span>
<span id="cb18-11"></span>
<span id="cb18-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># PLottar maksimumsverdiar</span></span>
<span id="cb18-13">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"maks"</span>].plot(</span>
<span id="cb18-14">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"seagreen"</span>, </span>
<span id="cb18-15">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.8</span>, </span>
<span id="cb18-16">    grid <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>, </span>
<span id="cb18-17">    fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>, </span>
<span id="cb18-18">    legend <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>,</span>
<span id="cb18-19">    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Største verdi"</span></span>
<span id="cb18-20">)</span>
<span id="cb18-21"></span>
<span id="cb18-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fargelegg området mellom 25- og 75-persentilane</span></span>
<span id="cb18-23">plt.fill_between(</span>
<span id="cb18-24">    piv.index, </span>
<span id="cb18-25">    piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"25%"</span>], piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"75%"</span>], </span>
<span id="cb18-26">    facecolor<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'green'</span>, </span>
<span id="cb18-27">    alpha<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">0.2</span>, </span>
<span id="cb18-28">    interpolate<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">True</span>,</span>
<span id="cb18-29">    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"25% - 75%"</span></span>
<span id="cb18-30">)</span>
<span id="cb18-31"></span>
<span id="cb18-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plottar medianen</span></span>
<span id="cb18-33">piv[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"median"</span>].plot(</span>
<span id="cb18-34">    linewidth <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, </span>
<span id="cb18-35">    color <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"darkgreen"</span>,</span>
<span id="cb18-36">    label <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Median"</span></span>
<span id="cb18-37">)</span>
<span id="cb18-38"></span>
<span id="cb18-39"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Pyntar på plottet</span></span>
<span id="cb18-40">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Dag i året </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;"> (01. jan - 31. des)"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>)</span>
<span id="cb18-41">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring i $m^3/s$"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">18</span>)</span>
<span id="cb18-42">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Vassføring - per dag i året </span><span class="ch" style="color: #20794D;
background-color: null;
font-style: inherit;">\n</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>, fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">24</span>)</span>
<span id="cb18-43">plt.legend(fontsize <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb18-44">plt.savefig(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Reinsnos - vassføring per dag gjennom året.png"</span>, dpi <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>)</span>
<span id="cb18-45">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-19-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="oppsummert" class="level2">
<h2 class="anchored" data-anchor-id="oppsummert">Oppsummert</h2>
<p>Det er mykje kjekt ein kan gjera med vassføringsdata frå NVE. Både det å laga plott som me har gjort over, og arbeida med store datamengder som dette kan erfaringsmessig gje elevane god innsikt i samanhengar og forståing for omgrep i hydrologien.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tips til undervisinga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dei elevlaga hydrogramma er eit godt utganspunkt for diskusjonar og utforsking.</p>
<p><span class="emoji" data-emoji="one">1️⃣</span> Jobb med koden saman med elevane. Lag plotta. <br> <span class="emoji" data-emoji="two">2️⃣</span> Be elevane om å finna andre elver (ulik storleik, ulik geografisk plassering) og lage eigne plott. <br> <span class="emoji" data-emoji="three">3️⃣</span> Sjå på ulike hydrogram laga av elevane (<strong>utan</strong> namn på vassdraget) og ha diskusjon i klassen om kva informasjon som ligg i plotta (Nord/sør/aust/vest? Høgde? Isbre? Snøsmelting/regnflom? Regulering?) <br> <span class="emoji" data-emoji="four">4️⃣</span> Avslør namn og plassering - korleis stemte det?</p>
</div>
</div>


</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>modellering</category>
  <category>programmering</category>
  <category>tips</category>
  <category>geofag</category>
  <guid>https://lektorodd.github.io/posts/230202_hydrologimodellering/</guid>
  <pubDate>Wed, 01 Feb 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230202_hydrologimodellering/island.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Zotero - kva, kvifor, korleis?</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230127_zotero/</link>
  <description><![CDATA[ 





<section id="kva-er-zotero" class="level1">
<h1>Kva er Zotero?</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/forside_zot.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:70.0%"></p>
</figure>
</div>
<p><a href="https://www.zotero.org/">Zotero</a> er eit verktøy for å handtera kjelder og siteringar. Det er relativt enkelt å bruka, og kan nyttast på tvers av ulike platformar og programvare. Terskelen for å implementera Zotero i undervisinga kan kanskje opplevast som litt høg. Så her kjem eit par argument for kvifor det kan vera ein fordel å ta dette steget, samt eit par konkrete tips og triks <span class="emoji" data-emoji="rocket">🚀</span></p>
</section>
<section id="kvifor-bruka-zotero" class="level1">
<h1>Kvifor bruka Zotero?</h1>
<p>Ein del av det å gjera elevane studieførebudde er å gjera dei i stand til å bli gode på kjelder. Stadig ser ein <a href="https://khrono.no/studenten-tok-sjansen-da-han-glemte-kilden-saksokte-da-han-ble-utestengt/747321">saker frå UH-sektoren</a> om studentar og kjeldebruk. Det er òg tydeleg i læreplanverket at kjelder er ein viktig del av fagfornyinga. Mellom anna står det under kjerneelementet <em>Utforsking og geografiske metoder</em> i læreplanen for geografi at:</p>
<blockquote class="blockquote">
<p>De skal også kunne bruke informasjon fra ulike typer kilder og kritisk vurdere hvor pålitelige og relevante disse kildene er. (Kunnskapsdepartementet, 2019)</p>
</blockquote>
<p>og vidare i læreplanen til same fag under den grunnleggjande ferdigheten <em>Å kunne skrive</em> vert det trekt fram at</p>
<blockquote class="blockquote">
<p>Å skrive i geografi innebærer også å utforske, beskrive, drøfte og vurdere geografiske forhold og å bruke og vise til kilder. (Kunnskapsdepartementet, 2019)</p>
</blockquote>
<p>Utfordringa når ein arbeidar med kjelder er gjerne å halda styr på kjeldene ein har brukt (organisering) samt all tida det tar å oppgje og føra kjeldene i ein bestemt stil (henvising). Nettopp her er Zotero eit framifrå verktøy. Her kan ein enkelt skaffa seg oversikt over alle kjeldene ein har brukt, organisera dei i mapper, ta notater, enkelt sitere i t.d. Word eller Google Docs osb. Ved å læra elevane opp i Zotero frigjer ein mykje tid frå den manuelle føringa av kjeldene, som jo ikkje er spesielt studieførebuande. Denne tida kan elevane heller nytta til å vurdera kjeldene, lesa innhald og vera kritisk. Biblioteket dei bygger seg opp gjennom vidaregåande kan dei òg ha med seg i vidare studier <span class="emoji" data-emoji="student">🧑‍🎓</span></p>
<p>I tillegg er Zotero veldig fleksibelt sett opp mot t.d. det innebygde kjeldeverktøyet i Word. Der ligg kjeldene «låst» inne i Word, og ein har lite nytte av dette andre stader. Med Zotero kan ein nytta det same biblioteket overalt. Både i presentasjonar og tekstbehandling uavhengig av om ein er i Microsoft eller Google sitt univers.</p>
<p>Som lærarar er det òg lurt å læra seg Zotero. For å få elevane til å nytta kjelder i presentasjonar og tekstar er det nok lurt gå framfor som gode døme.</p>
</section>
<section id="korleis-bruka-zotero" class="level1">
<h1>Korleis bruka Zotero?</h1>
<p><span class="emoji" data-emoji="bulb">💡</span> Her kjem eit par tips og triks til korleis ein kan bruka Zotero i kjeldearbeidet sitt</p>
<ul>
<li>Organisering</li>
<li>Legge til kjelder</li>
<li>Sitere i tekstbehandlar</li>
<li>Sitere utanfor tekstbehandlar</li>
</ul>
<section id="organisere-biblioteket" class="level2">
<h2 class="anchored" data-anchor-id="organisere-biblioteket">Organisere biblioteket</h2>
<p>Når du har lasta ned Zotero startar du med eit tomt bibliotek. Dette kan du organisera i <em>samlingar</em> (mapper). Du lager nye samlingar med å trykka på knappen til venstre over <em>Mitt bibliotek</em></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/bibliotek.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
<figcaption>Organisere biblioteket</figcaption>
</figure>
</div>
<p>Her kan ein t.d. dela inn etter fag, etter årstrinn eller andre inndelingar slik ein ønsker. Det er mogleg å ha under-samlingar viss ein ønsker det.</p>
</section>
<section id="legge-til-kjelder" class="level2">
<h2 class="anchored" data-anchor-id="legge-til-kjelder">Legge til kjelder</h2>
<p>Når ein skal fylla biblioteket sitt gjer ein dette på fleire ulike måtar. Her vil eg demonstrera korleis ein gjer det</p>
<ul>
<li>manuelt</li>
<li>med <a href="https://www.zotero.org/download/connectors">Zotero Connector</a></li>
<li>magisk <span class="emoji" data-emoji="mage">🧙</span></li>
</ul>
<p><strong>Legge til manuelt</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/leggetilmanuelt.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>For å legga til kjelder trykker ein på det grøne pluss-teiknet og vel ein passande type (t.d. <em>bok</em>). Når ein har gjort dette får ein opp ei kolonne til høgre med ulike felt som må fyllast ut:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/felt.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:40.0%"></p>
</figure>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tips
</div>
</div>
<div class="callout-body-container callout-body">
<p>På sidene til <a href="https://www.kildekompasset.no">kjeldekompasset</a> finn ein informasjon om kva felt som <strong>må</strong> fyllast ut. <br> <a href="https://kildekompasset.no/references/kapitler-artikler-i-redigerte-boker/">Her</a> er eit døme på <code>kapittel i bok med redaktør</code> (i APA7-stil)</p>
</div>
</div>
<p><strong>Med Zotero Connector</strong></p>
<p><a href="https://www.zotero.org/download/connectors">Zotero Connector</a> er ein plugin til nettlesar som gjer at ein automatisk kan legga kjelder på nett inn i biblioteket sitt. Her kan ein ta med <em>snapshot</em> av nettsida ein besøker, eller lasta ned pdf-dokumentet ein er inne på. Ein kan òg velga kva for samling i biblioteket den aktuelle ressursen skal lagrast til</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/connector.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pass på
</div>
</div>
<div class="callout-body-container callout-body">
<p>Det er ikkje alltid at alle felt vert rett fylt ut i Zotero, så dette må dobbelsjekkast (gjerne opp mot <a href="https://www.kildekompasset.no">kildekompasset</a>)</p>
</div>
</div>
<p><strong>Magisk</strong></p>
<p>Nokre kjelder som bøker og forskingsartiklarkan leggast inn ved hjelp av identifikatorar som ISBN, DOI, PMID osb. Då trykker ein på tryllestav-knappen til høgre for den vanlege “legg til”-knappen. For ein del norske bøker fungerer dette ofte ikkje, men for forskingsartiklar med DOI passar det godt.</p>
</section>
<section id="sitere-i-tekstbehandlar" class="level2">
<h2 class="anchored" data-anchor-id="sitere-i-tekstbehandlar">Sitere i tekstbehandlar</h2>
<p>I Microsoft Word og Google Docs er det eigne Zotero-verktøy. Når du har lasta ned og innstallert Zotero vil du sjå dette neste gong du opnar Word.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/word-verktøy.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Her ligg det verktøy for å legga inn referansar i tekst og kjeldeliste/bibliografi til slutt. For å legge inn referanse i teksten trykker ein på <code>Add/Edit Citation</code> og søker etter kjelda i søkefeltet. Første gang blir du bedt om å velga siteringsstil. Eg nyttar vanlegvis APA7 (<em>American Psychological Association</em>).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/inline-cite.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>Om du vil inkludera sidetal, kan du klikka på den valgte kjelda og legga inn dette manuelt. Då vil Zotero automatisk formatera referansen i teksten på rett måte (og på rett språk).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/sidetall.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>Til slutt kan du laga kjeldeliste av dei kjeldene som er nytta i teksten med å trykka på <code>Add/Edit Bibliography</code>. Denne vert automatisk sortert og formatert etter valgt referansestil.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/kjeldeliste.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
</section>
<section id="sitere-utanfor-tekstbehandlar" class="level2">
<h2 class="anchored" data-anchor-id="sitere-utanfor-tekstbehandlar">Sitere utanfor tekstbehandlar</h2>
<p>I presentasjonsverktøy som PowerPoint har ein ikkje innebygde Zotero-verktøy. Likevel er Zotero til god hjelp. Ein måte ein kan halda oversikt over kva kjelder ein har nytta i eit aktuelt prosjekt er gjennom å legga til <code>emneord</code> til dei ulike kjeldene. Til dømes <code>blogg-zotero</code>. Då kan ein søka og filtrera biblioteket sitt etter det spesifikke emneordet. Vidare kan ein då kopiera henvising (<code>shift</code>+<code>cmd/windows</code>+<code>A</code>) av den valgte kjelda. Ein kan til slutt markera alle kjeldene og kopiera bibliografi (<code>shift</code>+<code>cmd/windows</code>+<code>C</code>).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/powerpoint.jpg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="kjelder" class="level1">
<h1>Kjelder</h1>
<p>Kunnskapsdepartementet. (2019). Læreplan i geografi (GEO01-02). Fastsatt som forskrift. Læreplanverket for Kunnskapsløftet 2020. https://www.udir.no/lk20/geo01-02</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Gjenbruk</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section></div> ]]></description>
  <category>verktøy</category>
  <category>kjelder</category>
  <category>tips</category>
  <guid>https://lektorodd.github.io/posts/230127_zotero/</guid>
  <pubDate>Thu, 26 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230127_zotero/forside_zot.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
