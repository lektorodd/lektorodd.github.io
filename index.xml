<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Torodd F. Ottestad</title>
<link>https://lektorodd.github.io/index.html</link>
<atom:link href="https://lektorodd.github.io/index.xml" rel="self" type="application/rss+xml"/>
<description>Blogg om digitale tips og triks i skulen</description>
<generator>quarto-1.2.280</generator>
<lastBuildDate>Wed, 08 Feb 2023 23:00:00 GMT</lastBuildDate>
<item>
  <title>Grunnleggjande simulering i NumPy</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230209_simulering1/index.html</link>
  <description><![CDATA[ 




<section id="simulering-i-numpy" class="level1">
<h1><span class="emoji" data-emoji="computer">üíª</span> Simulering i NumPy</h1>
<p>Simulering er ein viktig del av l√¶replanen i matematikk for samfunnsfag (S1 + S2) i LK20. Mange l√¶reb√∏ker er opptatt av l√∏kker i simuleringa si. Det tar tid √• k√∏yra, kan vera meir tungt for elevane √• forst√• og kan by p√• meir feilmeldingar mtp. syntaks. Her kjem eit (kanskje av fleire) innlegg med tips til simulering med <a href="https://numpy.org/">NumPy</a>.</p>
<section id="random-generator" class="level2">
<h2 class="anchored" data-anchor-id="random-generator">Random generator</h2>
<p>For √• simulera lagar me ein <em>random generator</em>. Denne kallar me for <code>rng</code> (<em>random number generator</em>). Me kan tilpassa <code>default_rng()</code> med √• gje han ulike argument (feks. <code>seed</code> for √• f√• reproduserbare tal) men i praksis i S1 og S2 er det ikkje noko me treng √• tenka p√•.</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb1-2">rng <span class="op" style="color: #5E5E5E;">=</span> np.random.default_rng()</span></code></pre></div>
</div>
<p>Denne generatoren kan me bruka til mange ulike simuleringar. Om me vil kasta ein terning ein gong kan me trekka eit heiltal. Det gjer me med funksjonen <code>integers(low, high)</code> som ligg i <code>rng</code>-en v√•r.</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">terning <span class="op" style="color: #5E5E5E;">=</span> rng.integers(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>)</span>
<span id="cb2-2"><span class="bu" style="color: null;">print</span>(terning)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3</code></pre>
</div>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Pass p√•
</div>
</div>
<div class="callout-body-container callout-body">
<p>Her vil <code>terning = rng.integers(1, 7)</code> gje oss</p>
<p><img src="https://latex.codecogs.com/png.latex?%5Ctext%7Bterning%7D%20%5Cin%20%5C%7B1,%202,%203,%204,%205,%206%5C%7D"></p>
<p>Med andre ord <img src="https://latex.codecogs.com/png.latex?1%20%5Cleq%20%5Ctext%7Bterning%7D%20%3C%207"></p>
</div>
</div>
<p>Om me vil kasta fleire terningar kan me i tillegg gje inn <code>size</code> som argument til <code>rng.integers</code></p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">terningar <span class="op" style="color: #5E5E5E;">=</span> rng.integers(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>, <span class="dv" style="color: #AD0000;">10</span>)</span>
<span id="cb4-2"><span class="bu" style="color: null;">print</span>(terningar)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1 1 4 2 5 1 6 5 3 5]</code></pre>
</div>
</div>
<p>Vidare kan me rekna med resultata. Desse er lagra i ein <code>array</code> (ein variabeltype som minnar om lister).</p>
<p>Me kan t.d. sjekka kor mange av dei 10 terningane me kasta som vart seksarar. F√∏rst kan me sjekka kva verdiar som er 6:</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">terningar <span class="op" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">6</span></span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>array([False, False, False, False, False, False,  True, False, False,
       False])</code></pre>
</div>
</div>
<p>Dette kan me bruka til √• rekna med. Sidan <code>False</code> vert tolka som 0 og <code>True</code> vert tolka som 1 kan me finna summen av arrayen med sanningsvariablane:</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="bu" style="color: null;">sum</span>(terningar <span class="op" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">6</span>)</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>1</code></pre>
</div>
</div>
</section>
<section id="d√∏me" class="level2">
<h2 class="anchored" data-anchor-id="d√∏me">D√∏me <span class="emoji" data-emoji="game_die">üé≤</span></h2>
<p>Me trillar terning.</p>
<p><img src="https://latex.codecogs.com/png.latex?A">: terningen viser 5 eller 6.</p>
<p>Finn <img src="https://latex.codecogs.com/png.latex?P(A)"> ved hjelp av simulering.</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb10-2">rng <span class="op" style="color: #5E5E5E;">=</span> np.random.default_rng()</span>
<span id="cb10-3"></span>
<span id="cb10-4"><span class="co" style="color: #5E5E5E;"># tal simuleringar</span></span>
<span id="cb10-5">N <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">10000000</span></span>
<span id="cb10-6"></span>
<span id="cb10-7"><span class="co" style="color: #5E5E5E;"># triller terning N gongar</span></span>
<span id="cb10-8">terningar <span class="op" style="color: #5E5E5E;">=</span> rng.integers(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>, N)</span>
<span id="cb10-9"></span>
<span id="cb10-10"><span class="co" style="color: #5E5E5E;"># finn antall femmarar og seksarar</span></span>
<span id="cb10-11">gunstige <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">sum</span>(terningar <span class="op" style="color: #5E5E5E;">&gt;=</span> <span class="dv" style="color: #AD0000;">5</span>)</span>
<span id="cb10-12"></span>
<span id="cb10-13"><span class="co" style="color: #5E5E5E;"># finn og skriv ut relativ frekvens</span></span>
<span id="cb10-14">rel_frek <span class="op" style="color: #5E5E5E;">=</span> gunstige <span class="op" style="color: #5E5E5E;">/</span> N</span>
<span id="cb10-15"><span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"P(A) = </span><span class="sc" style="color: #5E5E5E;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;">:.4f}</span><span class="ss" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(A) = 0.3332</code></pre>
</div>
</div>
<p>Ut fr√• 10 000 000 simuleringar ser me at <img src="https://latex.codecogs.com/png.latex?P(A)=0,3333">. Dvs. det er <img src="https://latex.codecogs.com/png.latex?33,33%5C%25"> sannsynleg √• trilla 5 eller 6 p√• terningen.</p>
<p>D√∏met over er eit problem som ikkje er vanskeleg √• l√∏ysa analytisk, og dermed ikkje veldig spennande √• bruka simulering p√•. Men om problema vert vanskelege √• rekna p√• er dei ofte ikkje s√• vanskelege √• simulera. Eit litt meir avansert problem (som er lett √• simulera) finn me i S1-eksamen fr√• v√•ren 2022:</p>
<blockquote class="blockquote">
<p>I eit spel kastar du tre terningar. Du multipliserer saman augetalet p√• terningane. Dersom dette produktet er st√∏rre enn 100, vinn du. Bestem sannsynet for √• vinne ved √• k√∏yre simuleringar. Hugs √• vise korleis du kjem fram til svaret. <a href="https://sokeresultat.udir.no/eksamensoppgaver.html?query=s1">UDIR (2022) - Eksamen S1-V22</a></p>
</blockquote>
<p>For √• svare p√• denne oppg√•va treng me litt meir kjennskap til korleis me kan jobba med arrays. Arrays er ein form for lister eller vektorar. Me kan utf√∏ra ulike rekneoperasjonar med dei. Me kan t.d. legga dei saman og multiplisera dei:</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1">a <span class="op" style="color: #5E5E5E;">=</span> np.array([<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">2</span>, <span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">4</span>, <span class="dv" style="color: #AD0000;">5</span>, <span class="dv" style="color: #AD0000;">6</span>])</span>
<span id="cb12-2">b <span class="op" style="color: #5E5E5E;">=</span> np.array([<span class="dv" style="color: #AD0000;">6</span>, <span class="dv" style="color: #AD0000;">5</span>, <span class="dv" style="color: #AD0000;">4</span>, <span class="dv" style="color: #AD0000;">3</span>, <span class="dv" style="color: #AD0000;">2</span>, <span class="dv" style="color: #AD0000;">1</span>])</span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="bu" style="color: null;">print</span>(a<span class="op" style="color: #5E5E5E;">+</span>b)</span>
<span id="cb12-5"><span class="bu" style="color: null;">print</span>(a<span class="op" style="color: #5E5E5E;">*</span>b)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[7 7 7 7 7 7]
[ 6 10 12 12 10  6]</code></pre>
</div>
</div>
<p>D√• har me alt me treng for √• l√∏ysa eksamensoppg√•va:</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb14-2">rng <span class="op" style="color: #5E5E5E;">=</span> np.random.default_rng()</span>
<span id="cb14-3"></span>
<span id="cb14-4"><span class="co" style="color: #5E5E5E;"># antall simuleringar</span></span>
<span id="cb14-5">N <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1000000</span></span>
<span id="cb14-6"></span>
<span id="cb14-7"><span class="co" style="color: #5E5E5E;"># triller 3 terningar N gongar</span></span>
<span id="cb14-8">t1 <span class="op" style="color: #5E5E5E;">=</span> rng.integers(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>, N)</span>
<span id="cb14-9">t2 <span class="op" style="color: #5E5E5E;">=</span> rng.integers(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>, N)</span>
<span id="cb14-10">t3 <span class="op" style="color: #5E5E5E;">=</span> rng.integers(<span class="dv" style="color: #AD0000;">1</span>, <span class="dv" style="color: #AD0000;">7</span>, N)</span>
<span id="cb14-11"></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;"># finn produktet</span></span>
<span id="cb14-13">prod <span class="op" style="color: #5E5E5E;">=</span> t1<span class="op" style="color: #5E5E5E;">*</span> t2 <span class="op" style="color: #5E5E5E;">*</span> t3</span>
<span id="cb14-14"></span>
<span id="cb14-15"><span class="co" style="color: #5E5E5E;"># tel opp kor mange av produkta som er over 100</span></span>
<span id="cb14-16">gunstige <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">sum</span>(prod <span class="op" style="color: #5E5E5E;">&gt;</span> <span class="dv" style="color: #AD0000;">100</span>)</span>
<span id="cb14-17"></span>
<span id="cb14-18"><span class="co" style="color: #5E5E5E;"># finn og skriv ut relativ frekvens</span></span>
<span id="cb14-19">rel_frek <span class="op" style="color: #5E5E5E;">=</span> gunstige <span class="op" style="color: #5E5E5E;">/</span> N</span>
<span id="cb14-20"><span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"P(produkt over 100) = </span><span class="sc" style="color: #5E5E5E;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;">:.4f}</span><span class="ss" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(produkt over 100) = 0.0928</code></pre>
</div>
</div>
<p>Det er med andre ord ca. <img src="https://latex.codecogs.com/png.latex?9,34%5C%25"> sannsynleg √• vinna spelet.</p>
</section>
</section>
<section id="binomisk-sannsynsmodell" class="level1">
<h1>Binomisk sannsynsmodell</h1>
<p>I <code>rng</code> har me √≤g mogleiken for simulering av binomiske fordelingar.</p>
<p><code>rng.binomial(n, p)</code> der <code>n</code> er talet p√• delfors√∏k og <code>p</code> er sannsynet for suksess i kvart delfors√∏k.</p>
<section id="d√∏me-p√•-bruk" class="level2">
<h2 class="anchored" data-anchor-id="d√∏me-p√•-bruk">D√∏me p√• bruk</h2>
<p>Me plantar 150 fr√∏. Sannsynet for at eit fr√∏ spirer er 85%.</p>
<p>Kva er sannsynet for at minst 130 fr√∏ spirer?</p>
<p><img src="https://latex.codecogs.com/png.latex?X">: antall fr√∏ som spirer.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb16-2">rng <span class="op" style="color: #5E5E5E;">=</span> np.random.default_rng()</span>
<span id="cb16-3"></span>
<span id="cb16-4">N <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1000000</span>     <span class="co" style="color: #5E5E5E;"># antall simuleringar</span></span>
<span id="cb16-5"></span>
<span id="cb16-6">n <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">150</span>         <span class="co" style="color: #5E5E5E;"># antall delfors√∏k/fr√∏</span></span>
<span id="cb16-7">p <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.85</span>        <span class="co" style="color: #5E5E5E;"># sannsynet for at eitt fr√∏ spirer</span></span>
<span id="cb16-8"></span>
<span id="cb16-9"><span class="co" style="color: #5E5E5E;"># ser kor mange av fr√∏a som spirer kvar simulering</span></span>
<span id="cb16-10">spirer <span class="op" style="color: #5E5E5E;">=</span> rng.binomial(n, p, N)</span>
<span id="cb16-11"></span>
<span id="cb16-12"><span class="co" style="color: #5E5E5E;"># tell opp dei simuleringane som gjev 130+ fr√∏ som spirer</span></span>
<span id="cb16-13">gunstige <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">sum</span>(spirer <span class="op" style="color: #5E5E5E;">&gt;=</span> <span class="dv" style="color: #AD0000;">130</span>)</span>
<span id="cb16-14"></span>
<span id="cb16-15">rel_frek <span class="op" style="color: #5E5E5E;">=</span> gunstige <span class="op" style="color: #5E5E5E;">/</span> N</span>
<span id="cb16-16"><span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"P(X &gt;= 130) = </span><span class="sc" style="color: #5E5E5E;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;">:.4f}</span><span class="ss" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(X &gt;= 130) = 0.3311</code></pre>
</div>
</div>
<p>Ser at <img src="https://latex.codecogs.com/png.latex?P(X%5Cgeq%20130)%20=%200,3321">.</p>
</section>
</section>
<section id="hypergeometrisk-sannsynsmodell" class="level1">
<h1>Hypergeometrisk sannsynsmodell</h1>
<p>P√• same m√•te kan me simulera hypergeometrisk fordeling.</p>
<p><code>rng.hypergeometric(ngood, nbad, nsample)</code> der <code>ngood</code> og <code>nbad</code> er dei to delane av populasjonen v√•r og <code>nsample</code> er storleiken p√• utvalet me trekk.</p>
<section id="d√∏me-p√•-bruk-1" class="level2">
<h2 class="anchored" data-anchor-id="d√∏me-p√•-bruk-1">D√∏me p√• bruk</h2>
<p>Det ligg 4 daim og 7 banantwist i ei sk√•l. Du trekk 3 bitar. Kva er sannsynet for at akkurat to av desse er daim?</p>
<div class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span>
<span id="cb18-2">rng <span class="op" style="color: #5E5E5E;">=</span> np.random.default_rng()</span>
<span id="cb18-3"></span>
<span id="cb18-4"><span class="co" style="color: #5E5E5E;"># antall simuleringar</span></span>
<span id="cb18-5">N <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1000000</span></span>
<span id="cb18-6"></span>
<span id="cb18-7">ngood <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">4</span>      <span class="co" style="color: #5E5E5E;"># daim i populasjonen</span></span>
<span id="cb18-8">nbad <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">7</span>       <span class="co" style="color: #5E5E5E;"># banan i populasjonen</span></span>
<span id="cb18-9">nsample <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">3</span>    <span class="co" style="color: #5E5E5E;"># antall bitar me trekk</span></span>
<span id="cb18-10"></span>
<span id="cb18-11"><span class="co" style="color: #5E5E5E;"># simulerer</span></span>
<span id="cb18-12">twist <span class="op" style="color: #5E5E5E;">=</span> rng.hypergeometric(ngood, nbad, nsample, size<span class="op" style="color: #5E5E5E;">=</span>N)</span>
<span id="cb18-13"></span>
<span id="cb18-14"><span class="co" style="color: #5E5E5E;"># tel opp kor mange gonagar me fekk 2 daim</span></span>
<span id="cb18-15">gunstige <span class="op" style="color: #5E5E5E;">=</span> <span class="bu" style="color: null;">sum</span>(twist <span class="op" style="color: #5E5E5E;">==</span> <span class="dv" style="color: #AD0000;">2</span>)</span>
<span id="cb18-16"></span>
<span id="cb18-17">rel_frek <span class="op" style="color: #5E5E5E;">=</span> gunstige <span class="op" style="color: #5E5E5E;">/</span> N</span>
<span id="cb18-18"><span class="bu" style="color: null;">print</span>(<span class="ss" style="color: #20794D;">f"P(X=2) = </span><span class="sc" style="color: #5E5E5E;">{</span>rel_frek<span class="sc" style="color: #5E5E5E;">:.4f}</span><span class="ss" style="color: #20794D;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>P(X=2) = 0.2539</code></pre>
</div>
</div>
<p>Det er <img src="https://latex.codecogs.com/png.latex?25,5%5C%25"> sannsynleg at det er akkurat to daimtwist.</p>
</section>
</section>
<section id="oppsummert" class="level1">
<h1>Oppsummert</h1>
<p>Simulering med <code>numpy</code> er alts√• fleksibelt og raskt med mindre komplisert syntaks enn store l√∏kker.</p>
<p>I tillegg er det mange andre kjekke funksjonar som mellom anna <code>rng.choice()</code> og <code>rng.normal()</code> som kan vera kjekke. Meir om dei ein annan dag <span class="emoji" data-emoji="smile">üòÑ</span></p>


</section>

 ]]></description>
  <category>programmering</category>
  <category>s-matte</category>
  <category>simulering</category>
  <category>tips</category>
  <guid>https://lektorodd.github.io/posts/230209_simulering1/index.html</guid>
  <pubDate>Wed, 08 Feb 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230209_simulering1/terning.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Hydrologiprogrammering</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230202_hydrologimodellering/index.html</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/island.jpg" class="img-fluid figure-img" style="width:90.0%"></p>
<p></p><figcaption class="figure-caption">üì∑ Dettifoss, Island</figcaption><p></p>
</figure>
</div>
<section id="hydrologiprosjekt-i-geofag-1" class="level1">
<h1>Hydrologiprosjekt i Geofag 1</h1>
<p>Her kjem eit d√∏me p√• korleis ein kan bruka og behandla nokre av dei store hydrologi-datamengdene me har tilgjengeleg i Noreg. Datamaterialet er samla inn av <a href="https://www.nve.no/">NVE</a> og henta fr√• <a href="https://sildre.nve.no/">Sildre</a>.</p>
<p>üìå I det f√∏lgjande d√∏met nyttar eg vassf√∏ringsdata fr√• <a href="https://www.norgeskart.no/#!?project=norgeskart&amp;layers=1002&amp;zoom=11&amp;lat=6674836.62&amp;lon=34802.80&amp;sok=Reinsnosvatn&amp;markerLat=6675824.352100712&amp;markerLon=36873.4684766499&amp;p=searchOptionsPanel">Reinsnosvatn</a></p>
<blockquote class="blockquote">
<p>M√•lestasjonen ligger i Ullensvang i Vestland og er aktiv. Den har v√¶rt i drift siden juni 1917 og leverer i dag 3 forskjellige m√•linger. (sildre.nve.no)</p>
</blockquote>
<p>Prosjektet tek alts√• utgangspunkt i daglege m√•lingar fr√• 1917!</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tips til nedlasting
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>1Ô∏è‚É£ Finn deg ei elv p√• <a href="https://sildre.nve.no">sildre.nve.no</a> <br> 2Ô∏è‚É£ Trykk p√• <code>last ned som csv</code> <br> 3Ô∏è‚É£ Kryss av p√• aktuelle instillingar <br> 4Ô∏è‚É£ Last ned</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/laste_ned.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">‚¨áÔ∏è Laste ned data</figcaption><p></p>
</figure>
</div>
</div>
</div>
</div>
<section id="importere-bibliotek" class="level2">
<h2 class="anchored" data-anchor-id="importere-bibliotek">Importere bibliotek</h2>
<p>Vassf√∏ringsdataa er lasta ned i csv-format. Me bruker <code>pandas</code> for √• jobba med dette effektivt. I tillegg vert det litt plotting og matematikk, s√• me treng <code>pyplot</code> og <code>numpy</code> i tillegg.</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;">import</span> pandas <span class="im" style="color: #00769E;">as</span> pd</span>
<span id="cb1-2"><span class="im" style="color: #00769E;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;">as</span> plt</span>
<span id="cb1-3"><span class="im" style="color: #00769E;">import</span> numpy <span class="im" style="color: #00769E;">as</span> np</span></code></pre></div>
</div>
</section>
<section id="opprette-dataramme" class="level2">
<h2 class="anchored" data-anchor-id="opprette-dataramme">Opprette dataramme</h2>
<p>CSV-fila med vassf√∏ringsdata les me inn i ei <code>dataramme</code> (<em>dataframe</em>). Viss ein tar ein kikk p√• fila ser ein at det er brukt semikolon for √• skilja verdiane, det er to rader f√∏r verdiane kjem. Me lagar litt forenkla namn p√• kolonnene, og les inn data. I tillegg er det nytta komma (og ikkje punktum) som desimalteikn.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/df.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">üîç Dei f√∏rste linjene</figcaption><p></p>
</figure>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">df <span class="op" style="color: #5E5E5E;">=</span> pd.read_csv(</span>
<span id="cb2-2">    <span class="st" style="color: #20794D;">"vassforing_reinsnos_dogn.csv"</span>, </span>
<span id="cb2-3">    sep <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">";"</span>, </span>
<span id="cb2-4">    skiprows <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">2</span>, </span>
<span id="cb2-5">    names <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">"dato"</span>, <span class="st" style="color: #20794D;">"Vassf√∏ring"</span>, <span class="st" style="color: #20794D;">"Korrigert"</span>, <span class="st" style="color: #20794D;">"Kontrollert"</span>], </span>
<span id="cb2-6">    parse_dates <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">True</span>, </span>
<span id="cb2-7">    decimal<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">","</span></span>
<span id="cb2-8">)</span>
<span id="cb2-9"></span>
<span id="cb2-10">df.index <span class="op" style="color: #5E5E5E;">=</span> pd.to_datetime(df[<span class="st" style="color: #20794D;">'dato'</span>]) </span>
<span id="cb2-11">df.index <span class="op" style="color: #5E5E5E;">=</span> pd.to_datetime(df.index.date)</span>
<span id="cb2-12">df <span class="op" style="color: #5E5E5E;">=</span> df.drop(columns <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">"dato"</span>, <span class="st" style="color: #20794D;">"Korrigert"</span>, <span class="st" style="color: #20794D;">"Kontrollert"</span>])</span></code></pre></div>
</div>
<p>Sjekkar dei nyaste fem m√•lingane i tabellen for √• sj√• at alt ser ok ut.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1">df.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Vassf√∏ring</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2023-01-24</th>
      <td>1.299365</td>
    </tr>
    <tr>
      <th>2023-01-25</th>
      <td>1.593457</td>
    </tr>
    <tr>
      <th>2023-01-26</th>
      <td>2.128418</td>
    </tr>
    <tr>
      <th>2023-01-27</th>
      <td>2.322153</td>
    </tr>
    <tr>
      <th>2023-01-28</th>
      <td>2.324195</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>I tillegg kan me pr√∏va √• plotta verdiane i dataramma. <br> <em>Har med <code>;</code> for √• unng√• √• visa meldinga <code>&lt;AxesSubplot: &gt;</code></em></p>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">df.plot()<span class="op" style="color: #5E5E5E;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-5-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Me ser her at dette ikkje er spesielt nyttig eller informativt, men grafen viser oss at det p√• 1920-talet er eit par √•r utan m√•lingar. Korleis dette kan fiksast kjem me attende til litt seinare.</p>
</section>
<section id="middelflom" class="level2">
<h2 class="anchored" data-anchor-id="middelflom">Middelflom</h2>
<p>Middelflommen til ei elv er rekna ut fr√• den st√∏rste d√∏gnvassf√∏ringa per √•r over eit lengre tidsrom. Fr√• <a href="https://varsom.no/flom-og-jordskred/ordliste/ordliste-for-flom/">NVE/varsom.no</a> finn me denne definisjonen:</p>
<blockquote class="blockquote">
<p>En middelflom (normal flom) defineres som gjennomsnittet av h√∏yeste vannf√∏ring hvert √•r i en lang √•rrekke.</p>
</blockquote>
<p>For √• rekna ut dette m√• me alts√• f√∏rst finna den maksimale vassf√∏ringa per √•r. Bruker <code>groupby</code> i Pandas for √• finne dette.</p>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1">√•rleg_vf_maks <span class="op" style="color: #5E5E5E;">=</span> df.groupby(by<span class="op" style="color: #5E5E5E;">=</span>[df.index.year]).<span class="bu" style="color: null;">max</span>()</span>
<span id="cb5-2">√•rleg_vf_maks.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Vassf√∏ring</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1917</th>
      <td>26.98031</td>
    </tr>
    <tr>
      <th>1918</th>
      <td>50.93218</td>
    </tr>
    <tr>
      <th>1919</th>
      <td>37.72713</td>
    </tr>
    <tr>
      <th>1920</th>
      <td>63.26006</td>
    </tr>
    <tr>
      <th>1921</th>
      <td>58.04514</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Plottar den nye dataramma <code>√•rleg_maks</code> som kun har ei m√•ling per √•r:</p>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">√•rleg_vf_maks.plot()<span class="op" style="color: #5E5E5E;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-7-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>P√• grunn av ‚Äúholet‚Äù i m√•lingane tar me berre med data fr√• 1930 eller seinare med oss vidare. I tillegg er det vinter (og sn√∏/is) for dataa me har for 2023, s√• me avgrensar til 2022.</p>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1">√•rleg_vf_maks <span class="op" style="color: #5E5E5E;">=</span> √•rleg_vf_maks.loc[<span class="dv" style="color: #AD0000;">1930</span>:<span class="dv" style="color: #AD0000;">2022</span>]</span>
<span id="cb7-2">√•rleg_vf_maks.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Vassf√∏ring</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1930</th>
      <td>43.82251</td>
    </tr>
    <tr>
      <th>1931</th>
      <td>46.29647</td>
    </tr>
    <tr>
      <th>1932</th>
      <td>52.52979</td>
    </tr>
    <tr>
      <th>1933</th>
      <td>68.09634</td>
    </tr>
    <tr>
      <th>1934</th>
      <td>48.32775</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Me vil finna gjennomsnittleg st√∏rste √•rlege vassf√∏ring over fleire √•r. Vel her √• sj√• p√• eit gjennomsnitt p√• 30 √•r om gongen. Bruker funksjonen <code>rolling</code> og <code>mean</code> i kombinasjon. <code>rolling</code> gjer at me kan g√• gjennom dataramma og sj√• p√• dei 30 tidlegare verdiane til kvar rad i tabellen og finna gjennomsnittet (<code>mean</code>) i dette rullande vinduet.</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1">maksvf_og_middelflom <span class="op" style="color: #5E5E5E;">=</span> √•rleg_vf_maks.copy()</span>
<span id="cb8-2">maksvf_og_middelflom[<span class="st" style="color: #20794D;">"Middelflom"</span>] <span class="op" style="color: #5E5E5E;">=</span> √•rleg_vf_maks.rolling(window <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">30</span>).mean()</span></code></pre></div>
</div>
<p>Ser p√• dei f√∏rste 5 radene</p>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">maksvf_og_middelflom.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Vassf√∏ring</th>
      <th>Middelflom</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1930</th>
      <td>43.82251</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1931</th>
      <td>46.29647</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1932</th>
      <td>52.52979</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1933</th>
      <td>68.09634</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1934</th>
      <td>48.32775</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Ser at dei fem f√∏rste radene i den nye dataramma er <code>NaN</code> (not a number). Dette skjer fordi ein ikkje kan ta gjennomsnitt av dei siste 30 √•ra f√∏r det har g√•tt 30 √•r‚Ä¶ Sjekkar dei nyaste radene i staden:</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1">maksvf_og_middelflom.tail()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Vassf√∏ring</th>
      <th>Middelflom</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2018</th>
      <td>73.75180</td>
      <td>60.571163</td>
    </tr>
    <tr>
      <th>2019</th>
      <td>47.75206</td>
      <td>59.893282</td>
    </tr>
    <tr>
      <th>2020</th>
      <td>78.19958</td>
      <td>60.860965</td>
    </tr>
    <tr>
      <th>2021</th>
      <td>46.81937</td>
      <td>60.837067</td>
    </tr>
    <tr>
      <th>2022</th>
      <td>73.51824</td>
      <td>60.972971</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Plottar dataramma og ser korleis dei nye verdiane ser ut:</p>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1">maksvf_og_middelflom.plot()<span class="op" style="color: #5E5E5E;">;</span></span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-12-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="modellering-av-middelflom" class="level2">
<h2 class="anchored" data-anchor-id="modellering-av-middelflom">Modellering av middelflom</h2>
<p>Ser at trenden er oppadg√•ande og relativt line√¶r. √ònsker √• laga ein line√¶r modell. Bruker <code>polyfit</code> fr√• <code>NumPy</code>.</p>
<div class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;"># √•ra me har data p√• middelflom</span></span>
<span id="cb12-2"><span class="co" style="color: #5E5E5E;"># fr√• og med 1959 til men ikkje med 2023</span></span>
<span id="cb12-3">x <span class="op" style="color: #5E5E5E;">=</span> np.arange(<span class="dv" style="color: #AD0000;">1959</span>, <span class="dv" style="color: #AD0000;">2023</span>) </span>
<span id="cb12-4"></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;"># finn koeffesientane til f√∏rstegradspolynomet</span></span>
<span id="cb12-6">a, b <span class="op" style="color: #5E5E5E;">=</span> np.polyfit(x, maksvf_og_middelflom[<span class="st" style="color: #20794D;">"Middelflom"</span>].loc[<span class="dv" style="color: #AD0000;">1959</span>:<span class="dv" style="color: #AD0000;">2022</span>], <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;"># definerer line√¶r funksjon</span></span>
<span id="cb12-9"><span class="kw" style="color: #003B4F;">def</span> f(x):</span>
<span id="cb12-10">    <span class="cf" style="color: #003B4F;">return</span> a<span class="op" style="color: #5E5E5E;">*</span>x <span class="op" style="color: #5E5E5E;">+</span> b</span>
<span id="cb12-11"></span>
<span id="cb12-12"><span class="co" style="color: #5E5E5E;"># plottar dataramma</span></span>
<span id="cb12-13">maksvf_og_middelflom.plot(</span>
<span id="cb12-14">    figsize <span class="op" style="color: #5E5E5E;">=</span> (<span class="dv" style="color: #AD0000;">20</span>,<span class="dv" style="color: #AD0000;">9</span>), </span>
<span id="cb12-15">    grid <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">True</span>, </span>
<span id="cb12-16">    fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>, </span>
<span id="cb12-17">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">3</span>, </span>
<span id="cb12-18">    color <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">"lightsteelblue"</span>, <span class="st" style="color: #20794D;">"royalblue"</span>]</span>
<span id="cb12-19">)</span>
<span id="cb12-20"></span>
<span id="cb12-21"><span class="co" style="color: #5E5E5E;"># plottar modellen</span></span>
<span id="cb12-22">plt.plot(</span>
<span id="cb12-23">    x, f(x), </span>
<span id="cb12-24">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">2</span>, </span>
<span id="cb12-25">    label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"Modell for middelflom"</span>, </span>
<span id="cb12-26">    color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"red"</span></span>
<span id="cb12-27">)</span>
<span id="cb12-28"></span>
<span id="cb12-29"><span class="co" style="color: #5E5E5E;"># pynting av plot</span></span>
<span id="cb12-30">plt.title(<span class="st" style="color: #20794D;">"Vassf√∏ring og middelflom</span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">24</span>)</span>
<span id="cb12-31">plt.legend(fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb12-32">plt.ylabel(<span class="st" style="color: #20794D;">"Vassf√∏ring, kubikkmeter/s"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb12-33">plt.xlabel(<span class="st" style="color: #20794D;">"√Ör"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb12-34"><span class="co" style="color: #5E5E5E;">#plt.savefig("Reinsnos - √•rleg maksvassf√∏ring og middelflom.png", dpi = 300)</span></span>
<span id="cb12-35">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-13-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p><strong>Ekstrapolasjon - modell for framtidig middelflom</strong></p>
<p>Me kan bruka trendlinja for middelflommen som modell for √• seie noko om korleis utviklinga vil vera i √•ra framover (om utviklinga held fram som no):</p>
<div class="cell" data-execution_count="33">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1">maksvf_og_middelflom.plot(figsize <span class="op" style="color: #5E5E5E;">=</span> (<span class="dv" style="color: #AD0000;">20</span>,<span class="dv" style="color: #AD0000;">9</span>), </span>
<span id="cb13-2">                grid <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">True</span>, </span>
<span id="cb13-3">                fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>, </span>
<span id="cb13-4">                linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">3</span>, </span>
<span id="cb13-5">                color <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">"lightsteelblue"</span>, <span class="st" style="color: #20794D;">"royalblue"</span>]</span>
<span id="cb13-6">               )</span>
<span id="cb13-7"></span>
<span id="cb13-8">plt.plot(x, f(x), </span>
<span id="cb13-9">         linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">1.5</span>, </span>
<span id="cb13-10">         label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"Modell - middelflom"</span>, </span>
<span id="cb13-11">         color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"crimson"</span></span>
<span id="cb13-12">        )</span>
<span id="cb13-13"></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;"># Plottar forlenginga av den line√¶re modellen</span></span>
<span id="cb13-15">x2 <span class="op" style="color: #5E5E5E;">=</span> np.arange(<span class="dv" style="color: #AD0000;">2022</span>, <span class="dv" style="color: #AD0000;">2101</span>)</span>
<span id="cb13-16">plt.plot(x2, f(x2), <span class="st" style="color: #20794D;">":"</span>, linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">3</span>, color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"crimson"</span>)</span>
<span id="cb13-17"></span>
<span id="cb13-18"><span class="co" style="color: #5E5E5E;"># pynting av plot</span></span>
<span id="cb13-19">plt.title(<span class="st" style="color: #20794D;">"Vassf√∏ring og middelflom - modell fram mot 2100 </span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">24</span>)</span>
<span id="cb13-20">plt.legend(fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb13-21">plt.ylabel(<span class="st" style="color: #20794D;">"Vassf√∏ring, kubikkmeter/s"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb13-22">plt.xlabel(<span class="st" style="color: #20794D;">"√Ör"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb13-23"><span class="co" style="color: #5E5E5E;">#plt.savefig("Reinsnos - modellering av middelflom 2100.png", dpi = 300)</span></span>
<span id="cb13-24">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="sjekkar-opp-mot-nve-sine-flom-data" class="level2">
<h2 class="anchored" data-anchor-id="sjekkar-opp-mot-nve-sine-flom-data">Sjekkar opp mot NVE sine flom-data</h2>
<p>Fr√• stasjonsssida til Reinsnosvatn kan me finna data om ulike typar flom.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/flomdata_nve.jpg" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Flomdata fr√• <a href="https://sildre.nve.no/station/48.5.0?48.5.0_tab=2">NVE</a></figcaption><p></p>
</figure>
</div>
<p>Ser at verdien for 20-√•rsflom er 78,28 <img src="https://latex.codecogs.com/png.latex?m%5E3/s">. Plottar inn linja <img src="https://latex.codecogs.com/png.latex?y=78,28"> i samme figur som tidlegare. Bruker <code>plt.axhline()</code> for √• teikna horisontal linje.</p>
<div class="cell" data-execution_count="34">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><span class="co" style="color: #5E5E5E;"># √•ra me har data p√• middelflom</span></span>
<span id="cb14-2"><span class="co" style="color: #5E5E5E;"># fr√• og med 1959 til men ikkje med 2023</span></span>
<span id="cb14-3">x <span class="op" style="color: #5E5E5E;">=</span> np.arange(<span class="dv" style="color: #AD0000;">1959</span>, <span class="dv" style="color: #AD0000;">2023</span>) </span>
<span id="cb14-4"></span>
<span id="cb14-5"><span class="co" style="color: #5E5E5E;"># finn koeffesientane til f√∏rstegradspolynomet</span></span>
<span id="cb14-6">a, b <span class="op" style="color: #5E5E5E;">=</span> np.polyfit(x, maksvf_og_middelflom[<span class="st" style="color: #20794D;">"Middelflom"</span>].loc[<span class="dv" style="color: #AD0000;">1959</span>:<span class="dv" style="color: #AD0000;">2022</span>], <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb14-7"></span>
<span id="cb14-8"><span class="co" style="color: #5E5E5E;"># definerer line√¶r funksjon</span></span>
<span id="cb14-9"><span class="kw" style="color: #003B4F;">def</span> f(x):</span>
<span id="cb14-10">    <span class="cf" style="color: #003B4F;">return</span> a<span class="op" style="color: #5E5E5E;">*</span>x <span class="op" style="color: #5E5E5E;">+</span> b</span>
<span id="cb14-11"></span>
<span id="cb14-12"><span class="co" style="color: #5E5E5E;"># plottar dataramma</span></span>
<span id="cb14-13">maksvf_og_middelflom.plot(</span>
<span id="cb14-14">    figsize <span class="op" style="color: #5E5E5E;">=</span> (<span class="dv" style="color: #AD0000;">20</span>,<span class="dv" style="color: #AD0000;">9</span>), </span>
<span id="cb14-15">    grid <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">True</span>, </span>
<span id="cb14-16">    fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>, </span>
<span id="cb14-17">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">3</span>, </span>
<span id="cb14-18">    color <span class="op" style="color: #5E5E5E;">=</span> [<span class="st" style="color: #20794D;">"lightsteelblue"</span>, <span class="st" style="color: #20794D;">"royalblue"</span>]</span>
<span id="cb14-19">)</span>
<span id="cb14-20"></span>
<span id="cb14-21"><span class="co" style="color: #5E5E5E;"># plottar modellen</span></span>
<span id="cb14-22">plt.plot(</span>
<span id="cb14-23">    x, f(x), </span>
<span id="cb14-24">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">2</span>, </span>
<span id="cb14-25">    label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"Modell for middelflom"</span>, </span>
<span id="cb14-26">    color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"red"</span></span>
<span id="cb14-27">)</span>
<span id="cb14-28"></span>
<span id="cb14-29"><span class="co" style="color: #5E5E5E;"># plottar 20-√•rsflom</span></span>
<span id="cb14-30">plt.axhline(</span>
<span id="cb14-31">        y <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">78.28</span>,</span>
<span id="cb14-32">        color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"crimson"</span>, </span>
<span id="cb14-33">        linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">3</span>, </span>
<span id="cb14-34">        linestyle <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">":"</span>, </span>
<span id="cb14-35">        label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"20-√•rsflom"</span></span>
<span id="cb14-36">)</span>
<span id="cb14-37"></span>
<span id="cb14-38"><span class="co" style="color: #5E5E5E;"># pynting av plot</span></span>
<span id="cb14-39">plt.title(<span class="st" style="color: #20794D;">"Vassf√∏ring og middelflom</span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">24</span>)</span>
<span id="cb14-40">plt.legend(fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb14-41">plt.ylabel(<span class="st" style="color: #20794D;">"Vassf√∏ring, kubikkmeter/s"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb14-42">plt.xlabel(<span class="st" style="color: #20794D;">"√Ör"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb14-43"><span class="co" style="color: #5E5E5E;">#plt.savefig("Reinsnos - √•rleg maksvassf√∏ring og middelflom.png", dpi = 300)</span></span>
<span id="cb14-44">plt.show()</span></code></pre></div>
</details>
<div class="cell-output cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-15-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tips til oppg√•ver
</div>
</div>
<div class="callout-body-container callout-body">
<p>Plott linjer for dei ulike flom-typane. Kor godt stemmer observasjonane med desse tala? <br> Kva ligg i omgrepet 20-√•rsflom?</p>
</div>
</div>
</section>
</section>
<section id="hydrogram---vassf√∏ring-per-dag" class="level1">
<h1>Hydrogram - vassf√∏ring per dag</h1>
<p>Denne store tabellen v√•r med daglege data fr√• over 100 √•r kan me gjera mykje g√∏y med. Me kan t.d. sortera alle observasjonane til dag i √•ret, og sj√• korleis vassf√∏ringa <em>vanlegvis</em> er gjennom eit √•r. I koden under gjer me dette, og i tillegg fargelegg me omr√•det mellom 25 og 75-persenilen. P√• denne m√•ten f√•r me fargelagt dei 50% midterste m√•lingane per dag. Det er √≤g greitt √• visa medianen (som blir hydrogrammet) p√• figuren.</p>
<p>Startar med √• sortera den opprinnelege <code>df</code> til <em>dag i √•ret</em> (day of year - <code>doy</code>). Etterp√• grupperer me materialet i ein ny tabell.</p>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1">df[<span class="st" style="color: #20794D;">'doy'</span>] <span class="op" style="color: #5E5E5E;">=</span> df.index.dayofyear</span>
<span id="cb15-2">df[<span class="st" style="color: #20794D;">'√•r'</span>] <span class="op" style="color: #5E5E5E;">=</span> df.index.year</span>
<span id="cb15-3">df.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Vassf√∏ring</th>
      <th>doy</th>
      <th>√•r</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1917-06-15</th>
      <td>19.06312</td>
      <td>166</td>
      <td>1917</td>
    </tr>
    <tr>
      <th>1917-06-16</th>
      <td>16.46433</td>
      <td>167</td>
      <td>1917</td>
    </tr>
    <tr>
      <th>1917-06-17</th>
      <td>16.46433</td>
      <td>168</td>
      <td>1917</td>
    </tr>
    <tr>
      <th>1917-06-18</th>
      <td>18.67722</td>
      <td>169</td>
      <td>1917</td>
    </tr>
    <tr>
      <th>1917-06-19</th>
      <td>21.97948</td>
      <td>170</td>
      <td>1917</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<p>Lagar ein pivottabell med dag i √•ret som rader og √•rstal som kolonner</p>
<div class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1">piv <span class="op" style="color: #5E5E5E;">=</span> pd.pivot_table(df, index<span class="op" style="color: #5E5E5E;">=</span>[<span class="st" style="color: #20794D;">'doy'</span>],columns<span class="op" style="color: #5E5E5E;">=</span>[<span class="st" style="color: #20794D;">'√•r'</span>], values<span class="op" style="color: #5E5E5E;">=</span>[<span class="st" style="color: #20794D;">'Vassf√∏ring'</span>])</span>
<span id="cb16-2">piv.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th colspan="21" halign="left">Vassf√∏ring</th>
    </tr>
    <tr>
      <th>√•r</th>
      <th>1917</th>
      <th>1918</th>
      <th>1919</th>
      <th>1920</th>
      <th>1921</th>
      <th>1922</th>
      <th>1923</th>
      <th>1924</th>
      <th>1925</th>
      <th>1929</th>
      <th>...</th>
      <th>2014</th>
      <th>2015</th>
      <th>2016</th>
      <th>2017</th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
      <th>2021</th>
      <th>2022</th>
      <th>2023</th>
    </tr>
    <tr>
      <th>doy</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>0.751369</td>
      <td>0.520992</td>
      <td>0.110245</td>
      <td>0.520992</td>
      <td>2.268141</td>
      <td>0.858653</td>
      <td>NaN</td>
      <td>4.303123</td>
      <td>NaN</td>
      <td>...</td>
      <td>4.858096</td>
      <td>1.869427</td>
      <td>4.191920</td>
      <td>28.483190</td>
      <td>4.161459</td>
      <td>2.347107</td>
      <td>12.096400</td>
      <td>2.466642</td>
      <td>4.124214</td>
      <td>2.000038</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>0.751369</td>
      <td>0.481094</td>
      <td>0.095431</td>
      <td>0.562897</td>
      <td>2.268141</td>
      <td>0.751369</td>
      <td>NaN</td>
      <td>4.003652</td>
      <td>NaN</td>
      <td>...</td>
      <td>4.406689</td>
      <td>3.295648</td>
      <td>3.810454</td>
      <td>19.011320</td>
      <td>3.759124</td>
      <td>2.669421</td>
      <td>8.641389</td>
      <td>2.288357</td>
      <td>5.344579</td>
      <td>1.913351</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>0.701046</td>
      <td>0.443164</td>
      <td>0.095431</td>
      <td>0.606849</td>
      <td>2.166990</td>
      <td>0.803893</td>
      <td>NaN</td>
      <td>3.858951</td>
      <td>NaN</td>
      <td>...</td>
      <td>3.952404</td>
      <td>4.470398</td>
      <td>3.068896</td>
      <td>11.995200</td>
      <td>3.438255</td>
      <td>2.515568</td>
      <td>8.580434</td>
      <td>2.122319</td>
      <td>6.083396</td>
      <td>1.827513</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>0.701046</td>
      <td>0.407161</td>
      <td>0.095431</td>
      <td>0.652886</td>
      <td>1.973261</td>
      <td>0.915689</td>
      <td>NaN</td>
      <td>3.717565</td>
      <td>NaN</td>
      <td>...</td>
      <td>3.694488</td>
      <td>4.407481</td>
      <td>2.748646</td>
      <td>8.526679</td>
      <td>3.053644</td>
      <td>2.336836</td>
      <td>7.108252</td>
      <td>1.954245</td>
      <td>5.640584</td>
      <td>1.779285</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>0.652886</td>
      <td>0.373045</td>
      <td>0.110245</td>
      <td>0.803893</td>
      <td>1.703600</td>
      <td>0.915689</td>
      <td>NaN</td>
      <td>3.444615</td>
      <td>NaN</td>
      <td>...</td>
      <td>3.422920</td>
      <td>4.161712</td>
      <td>2.613774</td>
      <td>6.329734</td>
      <td>2.739008</td>
      <td>2.265773</td>
      <td>5.907576</td>
      <td>1.806864</td>
      <td>4.668677</td>
      <td>1.701279</td>
    </tr>
  </tbody>
</table>
<p>5 rows √ó 104 columns</p>
</div>
</div>
</div>
<section id="utrekningar" class="level2">
<h2 class="anchored" data-anchor-id="utrekningar">Utrekningar</h2>
<p>Finn ulike verdiar per dag i √•ret over dei 104 √•ra.</p>
<div class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1">piv[<span class="st" style="color: #20794D;">"min"</span>] <span class="op" style="color: #5E5E5E;">=</span> piv.<span class="bu" style="color: null;">min</span>(axis <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb17-2">piv[<span class="st" style="color: #20794D;">"maks"</span>] <span class="op" style="color: #5E5E5E;">=</span> piv.<span class="bu" style="color: null;">max</span>(axis <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb17-3">piv[<span class="st" style="color: #20794D;">"75%"</span>] <span class="op" style="color: #5E5E5E;">=</span> piv.quantile(q <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.75</span>,axis <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb17-4">piv[<span class="st" style="color: #20794D;">"median"</span>] <span class="op" style="color: #5E5E5E;">=</span> piv.median(axis <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb17-5">piv[<span class="st" style="color: #20794D;">"25%"</span>] <span class="op" style="color: #5E5E5E;">=</span> piv.quantile(q <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.25</span>,axis <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">1</span>)</span>
<span id="cb17-6"></span>
<span id="cb17-7">piv.head()</span></code></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th colspan="16" halign="left">Vassf√∏ring</th>
      <th>min</th>
      <th>maks</th>
      <th>75%</th>
      <th>median</th>
      <th>25%</th>
    </tr>
    <tr>
      <th>√•r</th>
      <th>1917</th>
      <th>1918</th>
      <th>1919</th>
      <th>1920</th>
      <th>1921</th>
      <th>1922</th>
      <th>1923</th>
      <th>1924</th>
      <th>1925</th>
      <th>1929</th>
      <th>...</th>
      <th>2019</th>
      <th>2020</th>
      <th>2021</th>
      <th>2022</th>
      <th>2023</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
    <tr>
      <th>doy</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>0.751369</td>
      <td>0.520992</td>
      <td>0.110245</td>
      <td>0.520992</td>
      <td>2.268141</td>
      <td>0.858653</td>
      <td>NaN</td>
      <td>4.303123</td>
      <td>NaN</td>
      <td>...</td>
      <td>2.347107</td>
      <td>12.096400</td>
      <td>2.466642</td>
      <td>4.124214</td>
      <td>2.000038</td>
      <td>0.110245</td>
      <td>28.48319</td>
      <td>2.589138</td>
      <td>1.381706</td>
      <td>0.701046</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>0.751369</td>
      <td>0.481094</td>
      <td>0.095431</td>
      <td>0.562897</td>
      <td>2.268141</td>
      <td>0.751369</td>
      <td>NaN</td>
      <td>4.003652</td>
      <td>NaN</td>
      <td>...</td>
      <td>2.669421</td>
      <td>8.641389</td>
      <td>2.288357</td>
      <td>5.344579</td>
      <td>1.913351</td>
      <td>0.095431</td>
      <td>19.01132</td>
      <td>2.548025</td>
      <td>1.417153</td>
      <td>0.652886</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>0.701046</td>
      <td>0.443164</td>
      <td>0.095431</td>
      <td>0.606849</td>
      <td>2.166990</td>
      <td>0.803893</td>
      <td>NaN</td>
      <td>3.858951</td>
      <td>NaN</td>
      <td>...</td>
      <td>2.515568</td>
      <td>8.580434</td>
      <td>2.122319</td>
      <td>6.083396</td>
      <td>1.827513</td>
      <td>0.095431</td>
      <td>11.99520</td>
      <td>2.491543</td>
      <td>1.381060</td>
      <td>0.606849</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>0.701046</td>
      <td>0.407161</td>
      <td>0.095431</td>
      <td>0.652886</td>
      <td>1.973261</td>
      <td>0.915689</td>
      <td>NaN</td>
      <td>3.717565</td>
      <td>NaN</td>
      <td>...</td>
      <td>2.336836</td>
      <td>7.108252</td>
      <td>1.954245</td>
      <td>5.640584</td>
      <td>1.779285</td>
      <td>0.095431</td>
      <td>14.41007</td>
      <td>2.421806</td>
      <td>1.275205</td>
      <td>0.652886</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>0.652886</td>
      <td>0.373045</td>
      <td>0.110245</td>
      <td>0.803893</td>
      <td>1.703600</td>
      <td>0.915689</td>
      <td>NaN</td>
      <td>3.444615</td>
      <td>NaN</td>
      <td>...</td>
      <td>2.265773</td>
      <td>5.907576</td>
      <td>1.806864</td>
      <td>4.668677</td>
      <td>1.701279</td>
      <td>0.110245</td>
      <td>18.95604</td>
      <td>2.372195</td>
      <td>1.207931</td>
      <td>0.728653</td>
    </tr>
  </tbody>
</table>
<p>5 rows √ó 109 columns</p>
</div>
</div>
</div>
</section>
<section id="plottar" class="level2">
<h2 class="anchored" data-anchor-id="plottar">Plottar</h2>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><span class="co" style="color: #5E5E5E;"># Plottar minimumsverdiar</span></span>
<span id="cb18-2">piv[<span class="st" style="color: #20794D;">"min"</span>].plot(</span>
<span id="cb18-3">    figsize <span class="op" style="color: #5E5E5E;">=</span> (<span class="dv" style="color: #AD0000;">20</span>, <span class="dv" style="color: #AD0000;">8</span>),</span>
<span id="cb18-4">    color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"seagreen"</span>, </span>
<span id="cb18-5">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.8</span>, </span>
<span id="cb18-6">    grid <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">False</span>, </span>
<span id="cb18-7">    fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">18</span>, </span>
<span id="cb18-8">    legend <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">False</span>,</span>
<span id="cb18-9">    label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"Minste verdi"</span></span>
<span id="cb18-10">)</span>
<span id="cb18-11"></span>
<span id="cb18-12"><span class="co" style="color: #5E5E5E;"># PLottar maksimumsverdiar</span></span>
<span id="cb18-13">piv[<span class="st" style="color: #20794D;">"maks"</span>].plot(</span>
<span id="cb18-14">    color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"seagreen"</span>, </span>
<span id="cb18-15">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="fl" style="color: #AD0000;">0.8</span>, </span>
<span id="cb18-16">    grid <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">False</span>, </span>
<span id="cb18-17">    fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">18</span>, </span>
<span id="cb18-18">    legend <span class="op" style="color: #5E5E5E;">=</span> <span class="va" style="color: #111111;">False</span>,</span>
<span id="cb18-19">    label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"St√∏rste verdi"</span></span>
<span id="cb18-20">)</span>
<span id="cb18-21"></span>
<span id="cb18-22"><span class="co" style="color: #5E5E5E;"># Fargelegg omr√•det mellom 25- og 75-persentilane</span></span>
<span id="cb18-23">plt.fill_between(</span>
<span id="cb18-24">    piv.index, </span>
<span id="cb18-25">    piv[<span class="st" style="color: #20794D;">"25%"</span>], piv[<span class="st" style="color: #20794D;">"75%"</span>], </span>
<span id="cb18-26">    facecolor<span class="op" style="color: #5E5E5E;">=</span><span class="st" style="color: #20794D;">'green'</span>, </span>
<span id="cb18-27">    alpha<span class="op" style="color: #5E5E5E;">=</span><span class="fl" style="color: #AD0000;">0.2</span>, </span>
<span id="cb18-28">    interpolate<span class="op" style="color: #5E5E5E;">=</span><span class="va" style="color: #111111;">True</span>,</span>
<span id="cb18-29">    label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"25% - 75%"</span></span>
<span id="cb18-30">)</span>
<span id="cb18-31"></span>
<span id="cb18-32"><span class="co" style="color: #5E5E5E;"># Plottar medianen</span></span>
<span id="cb18-33">piv[<span class="st" style="color: #20794D;">"median"</span>].plot(</span>
<span id="cb18-34">    linewidth <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">2</span>, </span>
<span id="cb18-35">    color <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"darkgreen"</span>,</span>
<span id="cb18-36">    label <span class="op" style="color: #5E5E5E;">=</span> <span class="st" style="color: #20794D;">"Median"</span></span>
<span id="cb18-37">)</span>
<span id="cb18-38"></span>
<span id="cb18-39"><span class="co" style="color: #5E5E5E;"># Pyntar p√• plottet</span></span>
<span id="cb18-40">plt.xlabel(<span class="st" style="color: #20794D;">"Dag i √•ret </span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;"> (01. jan - 31. des)"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">18</span>)</span>
<span id="cb18-41">plt.ylabel(<span class="st" style="color: #20794D;">"Vassf√∏ring i $m^3/s$"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">18</span>)</span>
<span id="cb18-42">plt.title(<span class="st" style="color: #20794D;">"Vassf√∏ring - per dag i √•ret </span><span class="ch" style="color: #20794D;">\n</span><span class="st" style="color: #20794D;">"</span>, fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">24</span>)</span>
<span id="cb18-43">plt.legend(fontsize <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">16</span>)</span>
<span id="cb18-44">plt.savefig(<span class="st" style="color: #20794D;">"Reinsnos - vassf√∏ring per dag gjennom √•ret.png"</span>, dpi <span class="op" style="color: #5E5E5E;">=</span> <span class="dv" style="color: #AD0000;">300</span>)</span>
<span id="cb18-45">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://lektorodd.github.io/posts/230202_hydrologimodellering/index_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="oppsummert" class="level2">
<h2 class="anchored" data-anchor-id="oppsummert">Oppsummert</h2>
<p>Det er mykje kjekt ein kan gjera med vassf√∏ringsdata fr√• NVE. B√•de det √• laga plott som me har gjort over, og arbeida med store datamengder som dette kan erfaringsmessig gje elevane god innsikt i samanhengar og forst√•ing for omgrep i hydrologien.</p>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tips til undervisinga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Dei elevlaga hydrogramma er eit godt utganspunkt for diskusjonar og utforsking.</p>
<p><span class="emoji" data-emoji="one">1Ô∏è‚É£</span> Jobb med koden saman med elevane. Lag plotta. <br> <span class="emoji" data-emoji="two">2Ô∏è‚É£</span> Be elevane om √• finna andre elver (ulik storleik, ulik geografisk plassering) og lage eigne plott. <br> <span class="emoji" data-emoji="three">3Ô∏è‚É£</span> Sj√• p√• ulike hydrogram laga av elevane (<strong>utan</strong> namn p√• vassdraget) og ha diskusjon i klassen om kva informasjon som ligg i plotta (Nord/s√∏r/aust/vest? H√∏gde? Isbre? Sn√∏smelting/regnflom? Regulering?) <br> <span class="emoji" data-emoji="four">4Ô∏è‚É£</span> Avsl√∏r namn og plassering - korleis stemte det?</p>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>modellering</category>
  <category>programmering</category>
  <category>tips</category>
  <category>geofag</category>
  <guid>https://lektorodd.github.io/posts/230202_hydrologimodellering/index.html</guid>
  <pubDate>Wed, 01 Feb 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230202_hydrologimodellering/island.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Zotero - kva, kvifor, korleis?</title>
  <dc:creator>Torodd F. Ottestad</dc:creator>
  <link>https://lektorodd.github.io/posts/230127_zotero/index.html</link>
  <description><![CDATA[ 




<section id="kva-er-zotero" class="level1">
<h1>Kva er Zotero?</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/forside_zot.jpg" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
<p><a href="https://www.zotero.org/">Zotero</a> er eit verkt√∏y for √• handtera kjelder og siteringar. Det er relativt enkelt √• bruka, og kan nyttast p√• tvers av ulike platformar og programvare. Terskelen for √• implementera Zotero i undervisinga kan kanskje opplevast som litt h√∏g. S√• her kjem eit par argument for kvifor det kan vera ein fordel √• ta dette steget, samt eit par konkrete tips og triks <span class="emoji" data-emoji="rocket">üöÄ</span></p>
</section>
<section id="kvifor-bruka-zotero" class="level1">
<h1>Kvifor bruka Zotero?</h1>
<p>Ein del av det √• gjera elevane studief√∏rebudde er √• gjera dei i stand til √• bli gode p√• kjelder. Stadig ser ein <a href="https://khrono.no/studenten-tok-sjansen-da-han-glemte-kilden-saksokte-da-han-ble-utestengt/747321">saker fr√• UH-sektoren</a> om studentar og kjeldebruk. Det er √≤g tydeleg i l√¶replanverket at kjelder er ein viktig del av fagfornyinga. Mellom anna st√•r det under kjerneelementet <em>Utforsking og geografiske metoder</em> i l√¶replanen for geografi at:</p>
<blockquote class="blockquote">
<p>De skal ogs√• kunne bruke informasjon fra ulike typer kilder og kritisk vurdere hvor p√•litelige og relevante disse kildene er. (Kunnskapsdepartementet, 2019)</p>
</blockquote>
<p>og vidare i l√¶replanen til same fag under den grunnleggjande ferdigheten <em>√Ö kunne skrive</em> vert det trekt fram at</p>
<blockquote class="blockquote">
<p>√Ö skrive i geografi inneb√¶rer ogs√• √• utforske, beskrive, dr√∏fte og vurdere geografiske forhold og √• bruke og vise til kilder. (Kunnskapsdepartementet, 2019)</p>
</blockquote>
<p>Utfordringa n√•r ein arbeidar med kjelder er gjerne √• halda styr p√• kjeldene ein har brukt (organisering) samt all tida det tar √• oppgje og f√∏ra kjeldene i ein bestemt stil (henvising). Nettopp her er Zotero eit framifr√• verkt√∏y. Her kan ein enkelt skaffa seg oversikt over alle kjeldene ein har brukt, organisera dei i mapper, ta notater, enkelt sitere i t.d. Word eller Google Docs osb. Ved √• l√¶ra elevane opp i Zotero frigjer ein mykje tid fr√• den manuelle f√∏ringa av kjeldene, som jo ikkje er spesielt studief√∏rebuande. Denne tida kan elevane heller nytta til √• vurdera kjeldene, lesa innhald og vera kritisk. Biblioteket dei bygger seg opp gjennom vidareg√•ande kan dei √≤g ha med seg i vidare studier <span class="emoji" data-emoji="student">üßë‚Äçüéì</span></p>
<p>I tillegg er Zotero veldig fleksibelt sett opp mot t.d. det innebygde kjeldeverkt√∏yet i Word. Der ligg kjeldene ¬´l√•st¬ª inne i Word, og ein har lite nytte av dette andre stader. Med Zotero kan ein nytta det same biblioteket overalt. B√•de i presentasjonar og tekstbehandling uavhengig av om ein er i Microsoft eller Google sitt univers.</p>
<p>Som l√¶rarar er det √≤g lurt √• l√¶ra seg Zotero. For √• f√• elevane til √• nytta kjelder i presentasjonar og tekstar er det nok lurt g√• framfor som gode d√∏me.</p>
</section>
<section id="korleis-bruka-zotero" class="level1">
<h1>Korleis bruka Zotero?</h1>
<p><span class="emoji" data-emoji="bulb">üí°</span> Her kjem eit par tips og triks til korleis ein kan bruka Zotero i kjeldearbeidet sitt</p>
<ul>
<li>Organisering</li>
<li>Legge til kjelder</li>
<li>Sitere i tekstbehandlar</li>
<li>Sitere utanfor tekstbehandlar</li>
</ul>
<section id="organisere-biblioteket" class="level2">
<h2 class="anchored" data-anchor-id="organisere-biblioteket">Organisere biblioteket</h2>
<p>N√•r du har lasta ned Zotero startar du med eit tomt bibliotek. Dette kan du organisera i <em>samlingar</em> (mapper). Du lager nye samlingar med √• trykka p√• knappen til venstre over <em>Mitt bibliotek</em></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/bibliotek.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Organisere biblioteket</figcaption><p></p>
</figure>
</div>
<p>Her kan ein t.d. dela inn etter fag, etter √•rstrinn eller andre inndelingar slik ein √∏nsker. Det er mogleg √• ha under-samlingar viss ein √∏nsker det.</p>
</section>
<section id="legge-til-kjelder" class="level2">
<h2 class="anchored" data-anchor-id="legge-til-kjelder">Legge til kjelder</h2>
<p>N√•r ein skal fylla biblioteket sitt gjer ein dette p√• fleire ulike m√•tar. Her vil eg demonstrera korleis ein gjer det</p>
<ul>
<li>manuelt</li>
<li>med <a href="https://www.zotero.org/download/connectors">Zotero Connector</a></li>
<li>magisk <span class="emoji" data-emoji="mage">üßô</span></li>
</ul>
<p><strong>Legge til manuelt</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/leggetilmanuelt.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>For √• legga til kjelder trykker ein p√• det gr√∏ne pluss-teiknet og vel ein passande type (t.d. <em>bok</em>). N√•r ein har gjort dette f√•r ein opp ei kolonne til h√∏gre med ulike felt som m√• fyllast ut:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/felt.jpg" class="img-fluid figure-img" style="width:40.0%"></p>
</figure>
</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tips
</div>
</div>
<div class="callout-body-container callout-body">
<p>P√• sidene til <a href="https://www.kildekompasset.no">kjeldekompasset</a> finn ein informasjon om kva felt som <strong>m√•</strong> fyllast ut. <br> <a href="https://kildekompasset.no/references/kapitler-artikler-i-redigerte-boker/">Her</a> er eit d√∏me p√• <code>kapittel i bok med redakt√∏r</code> (i APA7-stil)</p>
</div>
</div>
<p><strong>Med Zotero Connector</strong></p>
<p><a href="https://www.zotero.org/download/connectors">Zotero Connector</a> er ein plugin til nettlesar som gjer at ein automatisk kan legga kjelder p√• nett inn i biblioteket sitt. Her kan ein ta med <em>snapshot</em> av nettsida ein bes√∏ker, eller lasta ned pdf-dokumentet ein er inne p√•. Ein kan √≤g velga kva for samling i biblioteket den aktuelle ressursen skal lagrast til</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/connector.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<div class="callout-important callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Pass p√•
</div>
</div>
<div class="callout-body-container callout-body">
<p>Det er ikkje alltid at alle felt vert rett fylt ut i Zotero, s√• dette m√• dobbelsjekkast (gjerne opp mot <a href="https://www.kildekompasset.no">kildekompasset</a>)</p>
</div>
</div>
<p><strong>Magisk</strong></p>
<p>Nokre kjelder som b√∏ker og forskingsartiklarkan leggast inn ved hjelp av identifikatorar som ISBN, DOI, PMID osb. D√• trykker ein p√• tryllestav-knappen til h√∏gre for den vanlege ‚Äúlegg til‚Äù-knappen. For ein del norske b√∏ker fungerer dette ofte ikkje, men for forskingsartiklar med DOI passar det godt.</p>
</section>
<section id="sitere-i-tekstbehandlar" class="level2">
<h2 class="anchored" data-anchor-id="sitere-i-tekstbehandlar">Sitere i tekstbehandlar</h2>
<p>I Microsoft Word og Google Docs er det eigne Zotero-verkt√∏y. N√•r du har lasta ned og innstallert Zotero vil du sj√• dette neste gong du opnar Word.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/word-verkt√∏y.jpg" class="img-fluid figure-img" style="width:60.0%"></p>
</figure>
</div>
<p>Her ligg det verkt√∏y for √• legga inn referansar i tekst og kjeldeliste/bibliografi til slutt. For √• legge inn referanse i teksten trykker ein p√• <code>Add/Edit Citation</code> og s√∏ker etter kjelda i s√∏kefeltet. F√∏rste gang blir du bedt om √• velga siteringsstil. Eg nyttar vanlegvis APA7 (<em>American Psychological Association</em>).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/inline-cite.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>Om du vil inkludera sidetal, kan du klikka p√• den valgte kjelda og legga inn dette manuelt. D√• vil Zotero automatisk formatera referansen i teksten p√• rett m√•te (og p√• rett spr√•k).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/sidetall.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
<p>Til slutt kan du laga kjeldeliste av dei kjeldene som er nytta i teksten med √• trykka p√• <code>Add/Edit Bibliography</code>. Denne vert automatisk sortert og formatert etter valgt referansestil.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/kjeldeliste.jpg" class="img-fluid figure-img" style="width:80.0%"></p>
</figure>
</div>
</section>
<section id="sitere-utanfor-tekstbehandlar" class="level2">
<h2 class="anchored" data-anchor-id="sitere-utanfor-tekstbehandlar">Sitere utanfor tekstbehandlar</h2>
<p>I presentasjonsverkt√∏y som PowerPoint har ein ikkje innebygde Zotero-verkt√∏y. Likevel er Zotero til god hjelp. Ein m√•te ein kan halda oversikt over kva kjelder ein har nytta i eit aktuelt prosjekt er gjennom √• legga til <code>emneord</code> til dei ulike kjeldene. Til d√∏mes <code>blogg-zotero</code>. D√• kan ein s√∏ka og filtrera biblioteket sitt etter det spesifikke emneordet. Vidare kan ein d√• kopiera henvising (<code>shift</code>+<code>cmd/windows</code>+<code>A</code>) av den valgte kjelda. Ein kan til slutt markera alle kjeldene og kopiera bibliografi (<code>shift</code>+<code>cmd/windows</code>+<code>C</code>).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://lektorodd.github.io/posts/230127_zotero/powerpoint.jpg" class="img-fluid figure-img"></p>
</figure>
</div>
</section>
</section>
<section id="kjelder" class="level1">
<h1>Kjelder</h1>
<p>Kunnskapsdepartementet. (2019). L√¶replan i geografi (GEO01-02). Fastsatt som forskrift. L√¶replanverket for Kunnskapsl√∏ftet 2020. https://www.udir.no/lk20/geo01-02</p>


</section>

 ]]></description>
  <category>verkt√∏y</category>
  <category>kjelder</category>
  <category>tips</category>
  <guid>https://lektorodd.github.io/posts/230127_zotero/index.html</guid>
  <pubDate>Thu, 26 Jan 2023 23:00:00 GMT</pubDate>
  <media:content url="https://lektorodd.github.io/posts/230127_zotero/forside_zot.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
